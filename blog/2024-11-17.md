---
title: Building a C NEAR library
authors: [bucanero]
slug: cnear-library
tags: [updates]
---

*You can now use C to interact with the NEAR blockchain!*

<p><img src="/docs/blog/cnear-ps3-screenshot.png" /></p>

<!-- truncate -->

## The cNEAR library

I want to share a library I have been working, to interact with the NEAR blockchain using the C language. Since this library is written in C, it allows many different devices beyond the usual web-browser or PC (like a WiFi router or a gaming console) to use the Near blockchain.
The only requirement (beyond a C compiler) is the [libcurl library](https://curl.se/libcurl/), that leverages the networking communication with the RPC servers.

Currently, the [cNEAR library](https://github.com/bucanero/cnear-poc) lets you interact with smart contracts deployed on the Near blockchain (either `testnet` or `mainnet`), and `call` or `view` contract methods.
When calling methods that change the contract state, remember that you'll need to initialize the library with a signer account (using a private/public key pair) so the library can sign the transaction and execute the contract method.

This library is still an early development proof of concept so more features could be added in the future to support other blockchain actions such as token transfers or batch transactions.

If you find bugs or want to request additional features, feel free to open an issue on the [GitHub repository](https://github.com/bucanero/cnear-poc).

## How to use it

Using the cNEAR library, I made a [sample PlayStation 3 app](https://github.com/bucanero/cnear-poc/tree/main/sample-ps3) that connects to a [simple smart contract](https://docs.near.org/build/smart-contracts/quickstart#the-contract) running on the NEAR `testnet` network, and gets or sets the current greeting message on the contract's state.

This is probably the first time a gaming console is using NEAR, but I just wanted to test the library is truly portable and can be used almost anywhere:
- the PS3 arch is completely different (Big Endian vs little-endian, etc)
- compiled using a GCC v7.2.0 [cross-compiler toolchain](https://github.com/ps3dev/ps3toolchain)
- built using an open-source PS3 SDK ([PSL1GHT SDK](https://github.com/ps3dev/PSL1GHT/))
- the [sample app](https://drive.google.com/file/d/1iR_aaH7BPIGA9_HHKJI1S6nVyR-vNhcM/view?usp=sharing) can be tested on a PS3 emulator too


This is a sample application for the PlayStation 3 that demonstrates how to interact with the NEAR blockchain using the cNEAR library.
Features:

- Call a smart contract on the NEAR blockchain and get the current state.
```c
cnearResponse result;
// Call a contract function 'get_greeting' on contract 'demo-devhub-vid102.testnet'
// with empty JSON arguments
// Note: this is a view function (read-only), so it doesn't require gas
result = near_rpc_call_function("demo-devhub-vid102.testnet", "get_greeting", "{}");

if(result.rpc_code == 200)
{
    size_t len;
    char* contract_msg = (char*) near_decode_result(&result, &len);

    if (contract_msg)
    {
        printf("---\n%s\n---\n", contract_msg);
        free(res);
    }
}
free(result.json);
```

- Call a smart contract on the NEAR blockchain and set a new state.
```c
cnearResponse result;
// Call a contract function 'set_greeting' on contract 'demo-devhub-vid102.testnet'
// with JSON arguments '{"greeting":"Hello cNEAR!"}'
// Note: this is a change method that modifies the contract's state,
// so it's a signed transaction (require gas, and a signer account)
result = near_contract_call("demo-devhub-vid102.testnet",
            "set_greeting",
            "{\"greeting\":\"Hello cNEAR!\"}",
            NEAR_DEFAULT_100_TGAS, 0, NEAR_TX_STATUS_EXEC_OPTIMISTIC);
```

- Display the current state on the screen.
- Input a new state using the on-screen keyboard.



## The journey

How to Build your own library from scratch.

---

## Resources

1. [**cNEAR library**](https://github.com/bucanero/cnear-poc)

2. [PS3 Example](https://github.com/bucanero/cnear-poc/tree/main/sample-ps3)
