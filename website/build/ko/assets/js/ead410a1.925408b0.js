"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[9430],{15285:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>l,default:()=>u,frontMatter:()=>i,metadata:()=>o,toc:()=>d});var r=t(85893),a=t(11151),s=t(71183);const i={id:"marketplace",title:"\ub9c8\ucf13\ud50c\ub808\uc774\uc2a4",sidebar_label:"\ub9c8\ucf13\ud50c\ub808\uc774\uc2a4"},l=void 0,o={id:"tutorials/nfts/marketplace",title:"\ub9c8\ucf13\ud50c\ub808\uc774\uc2a4",description:"\uc774 \ud29c\ud1a0\ub9ac\uc5bc\uc5d0\uc11c\ub294 $NEAR\uc5d0 \ub300\ud574 \ub300\uccb4 \ubd88\uac00\ub2a5 \ud1a0\ud070(NFT)\uc744 \uc0ac\uace0 \ud314 \uc218 \uc788\ub294 NFT \ub9c8\ucf13\ud50c\ub808\uc774\uc2a4 \ucee8\ud2b8\ub799\ud2b8\uc758 \uae30\ubcf8 \uc0ac\ud56d\uc744 \ubc30\uc6c1\ub2c8\ub2e4. \uc774\uc804 \ud29c\ud1a0\ub9ac\uc5bc\uc5d0\uc11c\ub294 NFT \ud45c\uc900\uc5d0 \uc788\ub294 \ubaa8\ub4e0 \ud45c\uc900\uc744 \ud1b5\ud569\ud558\ub294 \uc644\uc804\ud55c NFT \ucee8\ud2b8\ub799\ud2b8\ub97c \uc791\uc131\ud588\uc2b5\ub2c8\ub2e4.",source:"@site/i18n/ko/docusaurus-plugin-content-docs/current/3.tutorials/nfts/8-marketplace.md",sourceDirName:"3.tutorials/nfts",slug:"/tutorials/nfts/marketplace",permalink:"/ko/tutorials/nfts/marketplace",draft:!1,unlisted:!1,editUrl:"https://github.com/near/docs/edit/master/website/../docs/3.tutorials/nfts/8-marketplace.md",tags:[],version:"current",lastUpdatedBy:"Github Actions",lastUpdatedAt:1719825734e3,sidebarPosition:8,frontMatter:{id:"marketplace",title:"\ub9c8\ucf13\ud50c\ub808\uc774\uc2a4",sidebar_label:"\ub9c8\ucf13\ud50c\ub808\uc774\uc2a4"},sidebar:"tutorials",previous:{title:"\uc2b9\uc778",permalink:"/ko/tutorials/nfts/approvals"},next:{title:"\ub85c\uc5f4\ud2f0",permalink:"/ko/tutorials/nfts/royalty"}},c={},d=[{value:"\uc18c\uac1c",id:"\uc18c\uac1c",level:2},{value:"\ucee8\ud2b8\ub799\ud2b8 \uc774\ud574\ud558\uae30",id:"\ucee8\ud2b8\ub799\ud2b8-\uc774\ud574\ud558\uae30",level:2},{value:"lib.rs",id:"lib-rs",level:2},{value:"\ucd08\uae30\ud654 \ud568\uc218",id:"initialization-function",level:3},{value:"\uc2a4\ud1a0\ub9ac\uc9c0 \uad00\ub9ac \ubaa8\ub378",id:"storage-management-model",level:3},{value:"sale.rs",id:"sale",level:2},{value:"\ub9ac\uc2a4\ud305 \ub85c\uc9c1",id:"listing-logic",level:3},{value:"nft_approve",id:"nft_approve",level:4},{value:"list_nft_for_sale",id:"list_nft_for_sale",level:4},{value:"process_listing",id:"process_listing",level:4},{value:"\ud310\ub9e4 \uac1d\uccb4",id:"sale-object",level:3},{value:"\ub9ac\uc2a4\ud305 \uc81c\uac70",id:"removing-sales",level:3},{value:"\uac00\uaca9 \uc5c5\ub370\uc774\ud2b8",id:"updating-price",level:3},{value:"NFT \uad6c\ub9e4",id:"purchasing-nfts",level:3},{value:"sale_view.rs",id:"sale_view-rs",level:2},{value:"Deployment and Initialization",id:"deployment-and-initialization",level:2},{value:"Minting and approving",id:"minting-and-approving",level:3},{value:"Listing NFT on sale",id:"listing-nft-on-sale",level:3},{value:"\ucd1d \uacf5\uae09\ub7c9",id:"total-supply",level:3},{value:"\uc18c\uc720\uc790\uac00 \uac00\uc9c4 \ucd1d \uacf5\uae09\ub7c9",id:"total-supply-by-owner",level:3},{value:"\ucee8\ud2b8\ub799\ud2b8\uc5d0 \uc758\ud55c \ucd1d \uacf5\uae09\ub7c9",id:"total-supply-by-contract",level:3},{value:"\ub9ac\uc2a4\ud305 \uc815\ubcf4 \ucffc\ub9ac",id:"query-listing-information",level:3},{value:"\uacb0\ub860",id:"\uacb0\ub860",level:2}];function h(e){const n={a:"a",admonition:"admonition",code:"code",h2:"h2",h3:"h3",h4:"h4",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,a.a)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(n.p,{children:["\uc774 \ud29c\ud1a0\ub9ac\uc5bc\uc5d0\uc11c\ub294 $NEAR\uc5d0 \ub300\ud574 \ub300\uccb4 \ubd88\uac00\ub2a5 \ud1a0\ud070(NFT)\uc744 \uc0ac\uace0 \ud314 \uc218 \uc788\ub294 NFT \ub9c8\ucf13\ud50c\ub808\uc774\uc2a4 \ucee8\ud2b8\ub799\ud2b8\uc758 \uae30\ubcf8 \uc0ac\ud56d\uc744 \ubc30\uc6c1\ub2c8\ub2e4. \uc774\uc804 \ud29c\ud1a0\ub9ac\uc5bc\uc5d0\uc11c\ub294 ",(0,r.jsx)(n.a,{href:"https://nomicon.io/Standards/NonFungibleToken",children:"NFT \ud45c\uc900"}),"\uc5d0 \uc788\ub294 \ubaa8\ub4e0 \ud45c\uc900\uc744 \ud1b5\ud569\ud558\ub294 \uc644\uc804\ud55c NFT \ucee8\ud2b8\ub799\ud2b8\ub97c \uc791\uc131\ud588\uc2b5\ub2c8\ub2e4."]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"\uc18c\uac1c",children:"\uc18c\uac1c"}),"\n",(0,r.jsxs)(n.p,{children:["Throughout this tutorial, you'll learn how a marketplace contract ",(0,r.jsx)(n.strong,{children:"could"})," work on NEAR. This is meant to be ",(0,r.jsx)(n.strong,{children:"an example"})," as there is no ",(0,r.jsx)(n.strong,{children:"canonical implementation"}),". \ub2f9\uc2e0\uc758 \uae30\ud638\uc5d0 \ub9de\uac8c \uc774 \ucee8\ud2b8\ub799\ud2b8\ub97c \uc790\uc720\ub86d\uac8c \ub098\ub204\uace0 \uc218\uc815\ud558\uc138\uc694."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"cd market-contract/\n"})}),"\n",(0,r.jsx)(n.p,{children:"This folder contains both the actual contract code and dependencies as outlined below."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"market-contract\n\u251c\u2500\u2500 Cargo.lock\n\u251c\u2500\u2500 Cargo.toml\n\u251c\u2500\u2500 README.md\n\u2514\u2500\u2500 src\n    \u251c\u2500\u2500 external.rs\n    \u251c\u2500\u2500 internal.rs\n    \u251c\u2500\u2500 lib.rs\n    \u251c\u2500\u2500 nft_callbacks.rs\n    \u251c\u2500\u2500 sale.rs\n    \u2514\u2500\u2500 sale_views.rs\n"})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"\ucee8\ud2b8\ub799\ud2b8-\uc774\ud574\ud558\uae30",children:"\ucee8\ud2b8\ub799\ud2b8 \uc774\ud574\ud558\uae30"}),"\n",(0,r.jsx)(n.p,{children:"\ucc98\uc74c\uc5d0\ub294 \ucee8\ud2b8\ub799\ud2b8\uac00 \uc0c1\ub2f9\ud788 \ubc84\uac70\uc6b8 \uc218 \uc788\uc9c0\ub9cc, \ubaa8\ub4e0 \ubd80\uac00 \uae30\ub2a5\uc744 \uc81c\uc678\ud558\uace0 \ud575\uc2ec \uae30\ub2a5\ub9cc \ud30c\ud5e4\uce58\uba74 \uc2e4\uc81c\ub85c\ub294 \ub9e4\uc6b0 \uac04\ub2e8\ud569\ub2c8\ub2e4. \uc774 \ucee8\ud2b8\ub799\ud2b8\ub294 \uc0ac\ub78c\ub4e4\uc774 NEAR\ub97c \uc704\ud574 NFT\ub97c \uc0ac\uace0 \ud314 \uc218 \uc788\ub3c4\ub85d \ud55c\ub2e4\ub294 \ub2e8 \ud55c \uac00\uc9c0\ub97c \uc704\ud574 \uc124\uacc4\ub418\uc5c8\uc2b5\ub2c8\ub2e4. \uc5ec\uae30\uc5d0\ub294 \ub85c\uc5f4\ud2f0 \uc9c0\ubd88, \ud310\ub9e4 \uac00\uaca9 \uc5c5\ub370\uc774\ud2b8, \ud310\ub9e4 \uc81c\uac70 \ubc0f \uc2a4\ud1a0\ub9ac\uc9c0 \ube44\uc6a9 \uc9c0\ubd88\uc5d0 \ub300\ud55c \uc9c0\uc6d0\uc774 \ud3ec\ud568\ub429\ub2c8\ub2e4."}),"\n",(0,r.jsx)(n.p,{children:"\uba87 \uac00\uc9c0 \uc911\uc694\ud55c \uae30\ub2a5\uc744 \ud558\ub294 \ud30c\uc77c\uacfc \ud568\uc218\ub4e4\uc744 \uc0b4\ud3b4 \ubd05\uc2dc\ub2e4."}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"lib-rs",children:"lib.rs"}),"\n",(0,r.jsx)(n.p,{children:"\uc774 \ud30c\uc77c\uc740 \ucee8\ud2b8\ub799\ud2b8\uc5d0 \uc800\uc7a5\ub418\ub294 \uc815\ubcf4\uc640 \uc544\ub798\uc5d0\uc11c \ubc30\uc6b0\uac8c \ub420 \uba87 \uac00\uc9c0 \uc8fc\uc694 \ud568\uc218\uc5d0 \ub300\ud574 \uc124\uba85\ud569\ub2c8\ub2e4."}),"\n",(0,r.jsx)(n.h3,{id:"initialization-function",children:"\ucd08\uae30\ud654 \ud568\uc218"}),"\n",(0,r.jsxs)(n.p,{children:["\ucc98\uc74c\uc73c\ub85c \uc0b4\ud3b4\ubcfc \ud568\uc218\ub294 \uc0dd\uc131\uc790 \ud568\uc218\uc785\ub2c8\ub2e4. \uc774\uac83\uc740 \uc720\uc77c\ud55c \ub9e4\uac1c\ubcc0\uc218\ub85c ",(0,r.jsx)(n.code,{children:"owner_id"}),"\ub97c \uc0ac\uc6a9\ud558\uba70, \ubaa8\ub4e0 \uc2a4\ud1a0\ub9ac\uc9c0 \uceec\ub809\uc158\uc744 \uae30\ubcf8\uac12\uc73c\ub85c \uc124\uc815\ud569\ub2c8\ub2e4."]}),"\n",(0,r.jsx)(s.Ey,{language:"rust",start:"92",end:"107",url:"https://github.com/near-examples/nft-tutorial/blob/main/market-contract/src/lib.rs"}),"\n",(0,r.jsx)("hr",{className:"subsection"}),"\n",(0,r.jsx)(n.h3,{id:"storage-management-model",children:"\uc2a4\ud1a0\ub9ac\uc9c0 \uad00\ub9ac \ubaa8\ub378"}),"\n",(0,r.jsxs)(n.p,{children:["Next, let's talk about the storage management model chosen for this contract. On the NFT contract, users attached $NEAR to the calls that needed storage paid for. For example, if someone was minting an NFT, they would need to attach ",(0,r.jsx)(n.code,{children:"x"})," amount of NEAR to cover the cost of storing the data on the contract."]}),"\n",(0,r.jsx)(n.p,{children:"On this marketplace contract, however, the storage model is a bit different. Users will need to deposit $NEAR onto the marketplace to cover the storage costs. Whenever someone puts an NFT for sale, the marketplace needs to store that information which costs $NEAR. Users can either deposit as much NEAR as they want so that they never have to worry about storage again or they can deposit the minimum amount to cover 1 sale on an as-needed basis."}),"\n",(0,r.jsx)(n.p,{children:"You might be thinking about the scenario when a sale is purchased. What happens to the storage that is now being released on the contract? This is why we've introduced a storage withdrawal function. This allows users to withdraw any excess storage that is not being used. Let's go through some scenarios to understand the logic. The required storage for 1 sale is 0.01 NEAR on the marketplace contract."}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Scenario A"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Benji\ub294 \uc2dc\uc7a5\uc5d0 \uc790\uc2e0\uc758 NFT\ub97c \ub9ac\uc2a4\ud305\ud558\uace0 \uc2f6\uc9c0\ub9cc, \uc2a4\ud1a0\ub9ac\uc9c0 \ube44\uc6a9\uc744 \uc9c0\ubd88\ud55c \uc801\uc774 \uc5c6\uc2b5\ub2c8\ub2e4."}),"\n",(0,r.jsxs)(n.li,{children:["\uadf8\ub294 ",(0,r.jsx)(n.code,{children:"storage_deposit"})," \uba54\uc11c\ub4dc\ub97c \uc0ac\uc6a9\ud558\uc5ec \uc815\ud655\ud788 0.01 NEAR\ub97c \uc608\uce58\ud569\ub2c8\ub2e4. \uc774\uac83\uc740 \ud55c \ubc88\uc758 \ud310\ub9e4\ub97c \ucee4\ubc84\ud560 \uac83\uc785\ub2c8\ub2e4."]}),"\n",(0,r.jsxs)(n.li,{children:["\uadf8\ub294 \ub9c8\ucf13\ud50c\ub808\uc774\uc2a4\uc5d0 \uc790\uc2e0\uc758 NFT\ub97c \ub9ac\uc2a4\ud305\ud558\uc600\uace0, \ud604\uc7ac \uc120\ubd88 \ud310\ub9e4 1\uac1c \uc911 1\uac1c\ub97c \uc0ac\uc6a9\ud558\uace0 \uc788\uae30 \ub54c\ubb38\uc5d0 \ub354 \uc774\uc0c1 \uc2a4\ud1a0\ub9ac\uc9c0 \uacf5\uac04\uc774 \ub0a8\uc544 \uc788\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4. \uadf8\uac00 ",(0,r.jsx)(n.code,{children:"storage_withdraw"}),"\ub97c \ud638\ucd9c\ud558\uba74 \uc544\ubb34 \uc77c\ub3c4 \uc77c\uc5b4\ub098\uc9c0 \uc54a\uc744 \uac83\uc785\ub2c8\ub2e4."]}),"\n",(0,r.jsx)(n.li,{children:"Dorian\uc740 Benji\uc758 NFT\ub97c \uc88b\uc544\ud558\uace0, \ub2e4\ub978 \uc0ac\ub78c\ubcf4\ub2e4 \uba3c\uc800 \ube60\ub974\uac8c \uad6c\ub9e4\ud588\uc2b5\ub2c8\ub2e4. \uc774\ub294 Benji\uc758 \ud310\ub9e4\uac00 \uc774\uc81c \uc911\ub2e8\ub418\uc5c8\uc73c\uba70(\uad6c\ub9e4\ud55c \uc774\ud6c4) Benji\ub294 \uc120\ubd88 \ud310\ub9e4 1\uac1c \uc911 0\uac1c\ub97c \uc0ac\uc6a9\ud558\uace0 \uc788\uc74c\uc744 \uc758\ubbf8\ud569\ub2c8\ub2e4. \uc989, \uadf8\ub294 1 \ud310\ub9e4 \ub610\ub294 0.01 NEAR\uac00 \ub0a8\uc2b5\ub2c8\ub2e4."}),"\n",(0,r.jsxs)(n.li,{children:["Benji\ub294 \uc774\uc81c ",(0,r.jsx)(n.code,{children:"storage_withdraw"})," \ud638\ucd9c\uc744 \ud560 \uc218 \uc788\uc73c\uba70, \uadf8\uc758 0.01 NEAR\ub97c \ub2e4\uc2dc \ub3cc\ub824\ubc1b\uc744 \uac83\uc785\ub2c8\ub2e4. \ucee8\ud2b8\ub799\ud2b8 \uce21\uba74\uc5d0\uc11c, \uadf8\ub294 \ucd9c\uae08 \ud6c4 \ud310\ub9e4 \uae08\uc561\uc774 0\uc774 \ub418\uba70, \uc774\uc81c NFT\ub97c \ub9ac\uc2a4\ud305\ud558\uae30 \uc804\uc5d0 \uc2a4\ud1a0\ub9ac\uc9c0 \ubcf4\uc99d\uae08\uc744 \uc608\uce58\ud574\uc57c \ud569\ub2c8\ub2e4."]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Scenario B"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Dorian\uc740 100\uac1c\uc758 \uc544\ub984\ub2e4\uc6b4 NFT\ub97c \uc18c\uc720\ud558\uace0 \uc788\uc73c\uba70, \ubaa8\ub4e0 NFT\ub97c \ub9ac\uc2a4\ud305\ud558\uace0 \uc2f6\uc2b5\ub2c8\ub2e4."}),"\n",(0,r.jsxs)(n.li,{children:["NFT\ub97c \ub098\uc5f4\ud560 \ub54c\ub9c8\ub2e4 ",(0,r.jsx)(n.code,{children:"storage_deposit"}),"\ub97c \ud638\ucd9c\ud560 \ud544\uc694\uac00 \uc5c6\ub3c4\ub85d, \uadf8\ub294 \ud55c \ubc88\ub9cc \ud638\ucd9c\ud558\uc600\uc2b5\ub2c8\ub2e4. Dorian\uc740 \uc131\uacf5\ud55c \uc0ac\ub78c\uc774\uae30 \ub54c\ubb38\uc5d0 1000\uac1c\uc758 \ud310\ub9e4\ub97c \ucee4\ubc84\ud558\uae30\uc5d0 \ucda9\ubd84\ud55c 10\uac1c\uc758 NEAR\ub97c \ucca8\ubd80\ud558\uc600\uc2b5\ub2c8\ub2e4. Then he lists his 100 NFTs and now he has an excess of 9 NEAR or 900 sales."]}),"\n",(0,r.jsxs)(n.li,{children:["Dorian\uc740 \ub2e4\ub978 \uc77c\uc744 \uc704\ud574 9 NEAR\uac00 \ud544\uc694\ud558\uc9c0\ub9cc, 100\uac1c\uc758 \ub9ac\uc2a4\ud305\uc744 \uc0ad\uc81c\ud558\uace0 \uc2f6\uc9c0\ub294 \uc54a\uc2b5\ub2c8\ub2e4. \uadf8\ub294 9 NEAR\uac00 \ub0a8\uc558\uae30 \ub54c\ubb38\uc5d0 \uc27d\uac8c \uc778\ucd9c\ud560 \uc218 \uc788\uace0 \uc5ec\uc804\ud788 100\uac1c\uc758 \ubaa9\ub85d\uc744 \ubcf4\uc720\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4. ",(0,r.jsx)(n.code,{children:"storage_withdraw"})," \ud638\ucd9c\uc744 \ud558\uace0 9 NEAR\ub97c \ubc1b\uc73c\uba74 \uadf8\ub294 0\uac1c\uc758 \ud310\ub9e4 \uac00\ub2a5 \uc218\ub7c9\uc744 \uac00\uc9c0\uac8c \ub420 \uac83\uc785\ub2c8\ub2e4."]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"With this behavior in mind, the following two functions outline the logic."}),"\n",(0,r.jsx)(s.Ey,{language:"rust",start:"111",end:"139",url:"https://github.com/near-examples/nft-tutorial/blob/main/market-contract/src/lib.rs"}),"\n",(0,r.jsx)(s.Ey,{language:"rust",start:"144",end:"175",url:"https://github.com/near-examples/nft-tutorial/blob/main/market-contract/src/lib.rs"}),"\n",(0,r.jsxs)(n.p,{children:["\uc774 \ucee8\ud2b8\ub799\ud2b8\uc5d0\uc11c \uac01 \ud310\ub9e4\uc5d0 \ud544\uc694\ud55c \uc2a4\ud1a0\ub9ac\uc9c0\ub294 0.01 NEAR\uc774\uc9c0\ub9cc, ",(0,r.jsx)(n.code,{children:"storage_minimum_balance"})," \ud568\uc218\ub97c \uc0ac\uc6a9\ud558\uc5ec \ud574\ub2f9 \uc815\ubcf4\ub97c \ucffc\ub9ac\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4. \ub610\ud55c, \ud574\ub2f9 \uacc4\uc815\uc774 \uc9c0\ubd88\ud55c \uc2a4\ud1a0\ub9ac\uc9c0 \uacf5\uac04\uc744 \ud655\uc778\ud558\ub824\uba74 ",(0,r.jsx)(n.code,{children:"storage_balance_of"})," \ud568\uc218\ub85c \ucffc\ub9ac\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4."]}),"\n",(0,r.jsxs)(n.p,{children:["With that out of the way, it's time to move onto the ",(0,r.jsx)(n.code,{children:"sale.rs"})," file where you'll look at how NFTs are put for sale."]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"sale",children:"sale.rs"}),"\n",(0,r.jsx)(n.p,{children:"This file is responsible for the internal marketplace logic."}),"\n",(0,r.jsx)(n.h3,{id:"listing-logic",children:"\ub9ac\uc2a4\ud305 \ub85c\uc9c1"}),"\n",(0,r.jsx)(n.p,{children:"In order to put an NFT on sale, a user should:"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["Approve the marketplace contract on an NFT token (by calling ",(0,r.jsx)(n.code,{children:"nft_approve"})," method on the NFT contract)"]}),"\n",(0,r.jsxs)(n.li,{children:["Call the ",(0,r.jsx)(n.code,{children:"list_nft_for_sale"})," method on the marketplace contract."]}),"\n"]}),"\n",(0,r.jsx)(n.h4,{id:"nft_approve",children:"nft_approve"}),"\n",(0,r.jsxs)(n.p,{children:["This method has to be called by the user to ",(0,r.jsx)(n.a,{href:"/ko/tutorials/nfts/approvals",children:"approve our marketplace"}),", so it can transfer the NFT on behalf of the user. In our contract, we only need to implement the ",(0,r.jsx)(n.code,{children:"nft_on_approve"})," method, which is called by the NFT contract when the user approves our contract."]}),"\n",(0,r.jsx)(n.p,{children:"In our case, we left it blank, but you could implement it to do some additional logic when the user approves your contract."}),"\n",(0,r.jsx)(s.Ey,{language:"rust",start:"23",end:"33",url:"https://github.com/near-examples/nft-tutorial/blob/main/market-contract/src/nft_callbacks.rs"}),"\n",(0,r.jsx)(n.h4,{id:"list_nft_for_sale",children:"list_nft_for_sale"}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"list_nft_for_sale"})," method lists an nft for sale, for this, it takes the id of the NFT contract (",(0,r.jsx)(n.code,{children:"nft_contract_id"}),"), the ",(0,r.jsx)(n.code,{children:"token_id"})," to know which token is listed, the ",(0,r.jsx)(n.a,{href:"/ko/tutorials/nfts/approvals",children:(0,r.jsx)(n.code,{children:"approval_id"})}),", and the price in yoctoNEAR at which we want to sell the NFT."]}),"\n",(0,r.jsx)(s.Ey,{language:"rust",start:"33",end:"74",url:"https://github.com/near-examples/nft-tutorial/blob/main/market-contract/src/sale.rs"}),"\n",(0,r.jsxs)(n.p,{children:["The function first checks if the user has ",(0,r.jsx)(n.a,{href:"#storage-management-model-storage-management-model",children:"enough storage available"}),", and makes two calls in parallel to the NFT contract. The first is to check if this marketplace contract is authorized to transfer the NFT. The second is to make sure that the caller (",(0,r.jsx)(n.code,{children:"predecessor"}),") is actually the owner of the NFT, otherwise, anyone could call this method to create fake listings. This second call is mostly a measure to avoid spam, since anyways, only the owner could approve the marketplace contract to transfer the NFT."]}),"\n",(0,r.jsxs)(n.p,{children:["Both calls return their results to the ",(0,r.jsx)(n.code,{children:"process_listing"})," function, which executes the logic to store the sale object on the contract."]}),"\n",(0,r.jsx)(n.h4,{id:"process_listing",children:"process_listing"}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"process_listing"})," function will receive if our marketplace is authorized to list the NFT on sale, and if this was requested by the NFTs owner. If both conditions are met, it will proceed to check if the user has enough storage, and store the sale object on the contract."]}),"\n",(0,r.jsx)(s.Ey,{language:"rust",start:"264",end:"344",url:"https://github.com/near-examples/nft-tutorial/blob/main/market-contract/src/sale.rs"}),"\n",(0,r.jsx)("hr",{class:"subsection"}),"\n",(0,r.jsx)(n.h3,{id:"sale-object",children:"\ud310\ub9e4 \uac1d\uccb4"}),"\n",(0,r.jsx)(n.p,{children:"\ucee8\ud2b8\ub799\ud2b8\ub294 \uac01 \ud310\ub9e4 \uac1d\uccb4\uc5d0 \ub300\ud574 \uc800\uc7a5\ud558\ub294 \uc815\ubcf4\ub97c \uc774\ud574\ud558\ub294 \uac83\uc774 \uc911\uc694\ud569\ub2c8\ub2e4. \ub9c8\ucf13\ud50c\ub808\uc774\uc2a4\uc5d0\ub294 \uc11c\ub85c \ub2e4\ub978 NFT \ucee8\ud2b8\ub799\ud2b8\uc5d0\uc11c \ub098\uc628 \ub9ce\uc740 NFT\uac00 \ub098\uc5f4\ub418\uc5b4 \uc788\uae30 \ub54c\ubb38\uc5d0, \ub2e8\uc21c\ud788 \ud1a0\ud070 ID\ub97c \uc800\uc7a5\ud558\ub294 \uac83\ub9cc\uc73c\ub85c\ub294 \uc11c\ub85c \ub2e4\ub978 NFT\ub97c \uad6c\ubcc4\ud558\uae30\uc5d0 \ucda9\ubd84\ud558\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4. \uc774\uac83\uc774 \ud1a0\ud070 ID\uc640 NFT\uac00 \ubc1c\uc0dd\ud55c \ucee8\ud2b8\ub799\ud2b8\ub97c \ubaa8\ub450 \ucd94\uc801\ud574\uc57c \ud558\ub294 \uc774\uc720\uc785\ub2c8\ub2e4. \ub610\ud55c \uac01 \ubaa9\ub85d\uc5d0 \ub300\ud574 \ucee8\ud2b8\ub799\ud2b8\ub294 NFT \uc804\uc1a1\uc744 \uc704\ud574 \uc81c\uacf5\ub41c \uc2b9\uc778 ID\ub97c \ucd94\uc801\ud574\uc57c \ud569\ub2c8\ub2e4. \ub9c8\uc9c0\ub9c9\uc73c\ub85c \uc18c\uc720\uc790 \ubc0f \ud310\ub9e4 \uc870\uac74\uc774 \ud544\uc694\ud569\ub2c8\ub2e4."}),"\n",(0,r.jsx)(s.Ey,{language:"rust",start:"5",end:"20",url:"https://github.com/near-examples/nft-tutorial/blob/main/market-contract/src/sale.rs"}),"\n",(0,r.jsx)("hr",{className:"subsection"}),"\n",(0,r.jsx)(n.h3,{id:"removing-sales",children:"\ub9ac\uc2a4\ud305 \uc81c\uac70"}),"\n",(0,r.jsxs)(n.p,{children:["\ub9ac\uc2a4\ud305\uc744 \uc81c\uac70\ud558\ub824\uba74, \uc18c\uc720\uc790\uac00 ",(0,r.jsx)(n.code,{children:"remove_sale"})," \ud568\uc218\ub97c \ud638\ucd9c\ud558\uace0 NFT \ucee8\ud2b8\ub799\ud2b8 \ubc0f \ud1a0\ud070 ID\ub97c \uc804\ub2ec\ud574\uc57c \ud569\ub2c8\ub2e4. \ub0b4\ubd80\uc801\uc73c\ub85c, \uc774\ub294 ",(0,r.jsx)(n.code,{children:"internal.rs"})," \ud30c\uc77c\uc5d0\uc11c \ucc3e\uc744 \uc218 \uc788\ub294 ",(0,r.jsx)(n.code,{children:"internal_remove_sale"})," \ud568\uc218\ub97c \ud638\ucd9c\ud569\ub2c8\ub2e4. \uc774\uac83\uc740 \ubcf4\uc548\uc0c1\uc758 \uc774\uc720\ub85c 1 yoctoNEAR\ub97c \uc694\uad6c\ud569\ub2c8\ub2e4."]}),"\n",(0,r.jsx)(s.Ey,{language:"rust",start:"76",end:"87",url:"https://github.com/near-examples/nft-tutorial/blob/main/market-contract/src/sale.rs"}),"\n",(0,r.jsx)("hr",{className:"subsection"}),"\n",(0,r.jsx)(n.h3,{id:"updating-price",children:"\uac00\uaca9 \uc5c5\ub370\uc774\ud2b8"}),"\n",(0,r.jsxs)(n.p,{children:["\ud1a0\ud070\uc758 \ub9ac\uc2a4\ud305 \uac00\uaca9\uc744 \uc5c5\ub370\uc774\ud2b8\ud558\ub824\uba74 \uc18c\uc720\uc790\uac00 ",(0,r.jsx)(n.code,{children:"update_price"})," \ud568\uc218\ub97c \ud638\ucd9c\ud558\uace0 \ucee8\ud2b8\ub799\ud2b8, \ud1a0\ud070 ID \ubc0f \uc6d0\ud558\ub294 \uac00\uaca9\uc744 \uc804\ub2ec\ud574\uc57c \ud569\ub2c8\ub2e4. \uc774\ub807\uac8c \ud558\uba74 \ud310\ub9e4 \uac1d\uccb4\ub97c \uac00\uc838\uc624\uace0 \ud310\ub9e4 \uc870\uac74\uc744 \ubcc0\uacbd\ud55c \ub2e4\uc74c \ub2e4\uc2dc \uc0bd\uc785\ud560 \uac83\uc785\ub2c8\ub2e4. \ubcf4\uc548\uc0c1\uc758 \uc774\uc720\ub85c \uc774 \ud568\uc218\ub294 1 yoctoNEAR\ub97c \uc694\uad6c\ud569\ub2c8\ub2e4."]}),"\n",(0,r.jsx)(s.Ey,{language:"rust",start:"90",end:"118",url:"https://github.com/near-examples/nft-tutorial/blob/main/market-contract/src/sale.rs"}),"\n",(0,r.jsx)("hr",{className:"subsection"}),"\n",(0,r.jsx)(n.h3,{id:"purchasing-nfts",children:"NFT \uad6c\ub9e4"}),"\n",(0,r.jsxs)(n.p,{children:["NFT\ub97c \uad6c\ub9e4\ud558\ub824\uba74 ",(0,r.jsx)(n.code,{children:"offer"})," \ud568\uc218\ub97c \ud638\ucd9c\ud574\uc57c \ud569\ub2c8\ub2e4. \uc774\ub294 \ub9e4\uac1c\ubcc0\uc218\ub85c ",(0,r.jsx)(n.code,{children:"nft_contract_id"}),"\uc640 ",(0,r.jsx)(n.code,{children:"token_id"}),"\ub97c \uc0ac\uc6a9\ud569\ub2c8\ub2e4. \uad6c\ub9e4\ud558\uace0 \uc2f6\ub2e4\uba74, \uc815\ud655\ud55c \uc591\uc758 NEAR\ub97c \ud638\ucd9c\uc5d0 \ucca8\ubd80\ud574\uc57c \ud569\ub2c8\ub2e4. \ub0b4\ubd80\uc801\uc73c\ub85c, \uc774\ub294 \ub2f9\uc2e0\uc758 \uae08\uc561\uc774 \uc815\uac00\ubcf4\ub2e4 \ud070\uc9c0 \ud655\uc778\ud558\uace0, ",(0,r.jsx)(n.code,{children:"process_purchase"})," \ud568\uc218\ub97c \ud638\ucd9c\ud569\ub2c8\ub2e4. \ud574\ub2f9 \ud568\uc218\ub294 NFT \ucee8\ud2b8\ub799\ud2b8\uc5d0 \ub300\ud55c \uad50\ucc28 \ucee8\ud2b8\ub799\ud2b8 \ud638\ucd9c\uc744 \uc218\ud589\ud558\uc5ec ",(0,r.jsx)(n.code,{children:"nft_transfer_payout"})," \ud568\uc218\ub97c \ud638\ucd9c\ud569\ub2c8\ub2e4. \uc774\ub807\uac8c \ud558\uba74, \uc774\uc804\uc5d0 \ubc30\uc6b4 ",(0,r.jsx)(n.a,{href:"https://nomicon.io/Standards/NonFungibleToken/ApprovalManagement.html",children:"\uc2b9\uc778 \uad00\ub9ac"})," \ud45c\uc900\uc744 \uc0ac\uc6a9\ud558\uc5ec NFT\ub97c \uc804\uc1a1\ud558\uace0, \ub85c\uc5f4\ud2f0\uac00 \ud3ec\ud568\ub41c ",(0,r.jsx)(n.code,{children:"Payout"})," \uac1d\uccb4\ub97c \ubc18\ud658\ud569\ub2c8\ub2e4."]}),"\n",(0,r.jsxs)(n.p,{children:["\uadf8\ub7f0 \ub2e4\uc74c \ub9c8\ucf13\ud50c\ub808\uc774\uc2a4\ub294 ",(0,r.jsx)(n.code,{children:"resolve_purchase"}),"\ub97c \ud638\ucd9c\ud558\uc5ec \uc545\uc758\uc801\uc778 \uc9c0\ubd88 \uac1d\uccb4\ub97c \ud655\uc778\ud558\uace0, \ubaa8\ub4e0 \uac83\uc774 \uc798 \uc9c4\ud589\ub418\uba74 \uc62c\ubc14\ub978 \uacc4\uc815\uc5d0 \uc9c0\ubd88\ud569\ub2c8\ub2e4."]}),"\n",(0,r.jsx)(s.Ey,{language:"rust",start:"121",end:"151",url:"https://github.com/near-examples/nft-tutorial/blob/main/market-contract/src/sale.rs"}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"sale_view-rs",children:"sale_view.rs"}),"\n",(0,r.jsxs)(n.p,{children:["The final file is ",(0,r.jsx)(n.a,{href:"https://github.com/near-examples/nft-tutorial/blob/main/market-contract/src/sale_view.rs",children:(0,r.jsx)(n.code,{children:"sale_view.rs"})})," file. \uc5ec\uae30\uc5d0 \uc5f4\uac70 \uba54\uc11c\ub4dc \uc911 \uc77c\ubd80\uac00 \uc124\uba85\ub418\uc5b4 \uc788\uc2b5\ub2c8\ub2e4. \uc774\ub97c \ud1b5\ud574 \uc0ac\uc6a9\uc790\ub294 \ud310\ub9e4\uc5d0 \uad00\ud55c \uc911\uc694\ud55c \uc815\ubcf4\ub97c \ucffc\ub9ac\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4."]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"deployment-and-initialization",children:"Deployment and Initialization"}),"\n",(0,r.jsx)(n.p,{children:"Next, you'll deploy this contract to the network."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"export MARKETPLACE_CONTRACT_ID=<accountId>\nnear account create-account sponsor-by-faucet-service $MARKETPLACE_CONTRACT_ID autogenerate-new-keypair save-to-legacy-keychain network-config testnet create\n"})}),"\n",(0,r.jsx)(n.p,{children:"Using the build script, deploy the contract as you did in the previous tutorials:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"cargo near deploy $MARKETPLACE_CONTRACT_ID with-init-call new json-args '{\"owner_id\": \"'$MARKETPLACE_CONTRACT_ID'\"}' prepaid-gas '100.0 Tgas' attached-deposit '0 NEAR' network-config testnet sign-with-keychain send\n"})}),"\n",(0,r.jsx)("hr",{className:"subsection"}),"\n",(0,r.jsx)(n.h3,{id:"minting-and-approving",children:"Minting and approving"}),"\n",(0,r.jsx)(n.p,{children:"Let's mint a new NFT token and approve a marketplace contract:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'near contract call-function as-transaction $NFT_CONTRACT_ID nft_mint json-args \'{"token_id": "token-1", "metadata": {"title": "My Non Fungible Team Token", "description": "The Team Most Certainly Goes :)", "media": "https://bafybeiftczwrtyr3k7a2k4vutd3amkwsmaqyhrdzlhvpt33dyjivufqusq.ipfs.dweb.link/goteam-gif.gif"}, "receiver_id": "\'$NFT_CONTRACT_ID\'"}\' prepaid-gas \'100.0 Tgas\' attached-deposit \'0.1 NEAR\' sign-as $NFT_CONTRACT_ID network-config testnet sign-with-legacy-keychain send\n'})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"near contract call-function as-transaction $NFT_CONTRACT_ID nft_approve json-args '{\"token_id\": \"token-1\", \"account_id\": \"'$MARKETPLACE_CONTRACT_ID'\"}' prepaid-gas '100.0 Tgas' attached-deposit '0.1 NEAR' sign-as $NFT_CONTRACT_ID network-config testnet sign-with-legacy-keychain send\n"})}),"\n",(0,r.jsx)("hr",{className:"subsection"}),"\n",(0,r.jsx)(n.h3,{id:"listing-nft-on-sale",children:"Listing NFT on sale"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'near contract call-function as-transaction $MARKETPLACE_CONTRACT_ID list_nft_for_sale json-args \'{"nft_contract_id": "\'$NFT_CONTRACT_ID\'", "token_id": "token-1", "approval_id": 0, "msg": "{\\"sale_conditions\\": \\"1\\"}"}\' prepaid-gas \'300.0 Tgas\' attached-deposit \'0 NEAR\' sign-as $NFT_CONTRACT_ID network-config testnet sign-with-legacy-keychain send\n'})}),"\n",(0,r.jsx)("hr",{className:"subsection"}),"\n",(0,r.jsx)(n.h3,{id:"total-supply",children:"\ucd1d \uacf5\uae09\ub7c9"}),"\n",(0,r.jsxs)(n.p,{children:["\ub9c8\ucf13\ud50c\ub808\uc774\uc2a4\uc5d0 \ub4f1\ub85d\ub41c NFT\uc758 \ucd1d \uacf5\uae09\ub7c9\uc744 \ucffc\ub9ac\ud558\ub824\uba74 ",(0,r.jsx)(n.code,{children:"get_supply_sales"})," \ud568\uc218\ub97c \ud638\ucd9c\ud558\uba74 \ub429\ub2c8\ub2e4. \uc544\ub798\uc5d0\uc11c \uc608\ub97c \ubcfc \uc218 \uc788\uc2b5\ub2c8\ub2e4."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"near contract call-function as-read-only $MARKETPLACE_CONTRACT_ID get_supply_sales json-args {} network-config testnet now\n"})}),"\n",(0,r.jsx)("hr",{className:"subsection"}),"\n",(0,r.jsx)(n.h3,{id:"total-supply-by-owner",children:"\uc18c\uc720\uc790\uac00 \uac00\uc9c4 \ucd1d \uacf5\uae09\ub7c9"}),"\n",(0,r.jsxs)(n.p,{children:["\ub9c8\ucf13\ud50c\ub808\uc774\uc2a4\uc758 \ud2b9\uc815 \uc18c\uc720\uc790\uac00 \ub098\uc5f4\ud55c NFT\uc758 \ucd1d \uacf5\uae09\ub7c9\uc744 \ucffc\ub9ac\ud558\ub824\uba74 ",(0,r.jsx)(n.code,{children:"get_supply_by_owner_id"})," \ud568\uc218\ub97c \ud638\ucd9c\ud558\uba74 \ub429\ub2c8\ub2e4. \uc544\ub798\uc5d0\uc11c \uc608\ub97c \ubcfc \uc218 \uc788\uc2b5\ub2c8\ub2e4."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"near contract call-function as-read-only $MARKETPLACE_CONTRACT_ID get_supply_by_owner_id json-args '{\"account_id\": \"'$NFT_CONTRACT_ID'\"}' network-config testnet now\n"})}),"\n",(0,r.jsx)("hr",{className:"subsection"}),"\n",(0,r.jsx)(n.h3,{id:"total-supply-by-contract",children:"\ucee8\ud2b8\ub799\ud2b8\uc5d0 \uc758\ud55c \ucd1d \uacf5\uae09\ub7c9"}),"\n",(0,r.jsxs)(n.p,{children:["\ud2b9\uc815 \ucee8\ud2b8\ub799\ud2b8\uc5d0 \uc18d\ud558\ub294 NFT\uc758 \ucd1d \uacf5\uae09\ub7c9\uc744 \ucffc\ub9ac\ud558\ub824\uba74 ",(0,r.jsx)(n.code,{children:"get_supply_by_nft_contract_id"})," \ud568\uc218\ub97c \ud638\ucd9c\ud558\uba74 \ub429\ub2c8\ub2e4. \uc544\ub798\uc5d0\uc11c \uc608\ub97c \ubcfc \uc218 \uc788\uc2b5\ub2c8\ub2e4."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"near contract call-function as-read-only $MARKETPLACE_CONTRACT_ID get_supply_by_nft_contract_id json-args '{\"nft_contract_id\": \"'$NFT_CONTRACT_ID'\"}' network-config testnet now\n"})}),"\n",(0,r.jsx)("hr",{className:"subsection"}),"\n",(0,r.jsx)(n.h3,{id:"query-listing-information",children:"\ub9ac\uc2a4\ud305 \uc815\ubcf4 \ucffc\ub9ac"}),"\n",(0,r.jsxs)(n.p,{children:["\ud2b9\uc815 \ub9ac\uc2a4\ud305\uc5d0 \ub300\ud55c \uc911\uc694\ud55c \uc815\ubcf4\ub97c \ucffc\ub9ac\ud558\uae30 \uc704\ud574 ",(0,r.jsx)(n.code,{children:"get_sale"})," \ud568\uc218\ub97c \ud638\ucd9c\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4. \uc774\ub97c \uc704\ud574\uc11c ",(0,r.jsx)(n.code,{children:"nft_contract_token"}),"\uc744 \ud1b5\uacfc\ud574\uc57c \ud569\ub2c8\ub2e4. \uc774\ub294 \ubcf8\uc9c8\uc801\uc73c\ub85c \uc55e\uc11c \uc124\uba85\ud55c \ub300\ub85c \ub9c8\ucf13\ud50c\ub808\uc774\uc2a4 \ucee8\ud2b8\ub799\ud2b8 \ud310\ub9e4\uc5d0 \ub300\ud55c \uace0\uc720 \uc2dd\ubcc4\uc790\uc785\ub2c8\ub2e4. \uc774\ub294 NFT \ucee8\ud2b8\ub799\ud2b8\uc640 ",(0,r.jsx)(n.code,{children:"DELIMITER"}),", \ud1a0\ud070 ID\ub85c \uad6c\uc131\ub429\ub2c8\ub2e4. \uc774 \ucee8\ud2b8\ub799\ud2b8\uc5d0\uc11c, ",(0,r.jsx)(n.code,{children:"DELIMITER"}),"\ub294 \ub2e8\uc21c\ud55c \uae30\uac04\uc785\ub2c8\ub2e4: ",(0,r.jsx)(n.code,{children:"."}),".  \uc774 \ucffc\ub9ac\uc758 \uc608\uc2dc\ub294 \uc544\ub798\uc5d0\uc11c \ubcfc \uc218 \uc788\uc2b5\ub2c8\ub2e4."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"near contract call-function as-read-only $MARKETPLACE_CONTRACT_ID get_sale json-args '{\"nft_contract_token\": \"'$NFT_CONTRACT_ID'.token-1\"}' network-config testnet now\n"})}),"\n",(0,r.jsxs)(n.p,{children:["\ub610\ud55c ",(0,r.jsx)(n.code,{children:"get_sales_by_owner_id"})," \ud568\uc218\ub97c \ud638\ucd9c\ud558\uc5ec, \uc9c0\uc815\ub41c \uc18c\uc720\uc790\uc758 \ubaa9\ub85d\uc5d0 \ub300\ud55c \uc815\ubcf4\ub97c \ucffc\ub9ac\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'near contract call-function as-read-only $MARKETPLACE_CONTRACT_ID get_sales_by_owner_id json-args \'{"account_id": "\'$NFT_CONTRACT_ID\'", "from_index": "0", "limit": 5}\' network-config testnet now\n'})}),"\n",(0,r.jsxs)(n.p,{children:["\ub9c8\uc9c0\ub9c9\uc73c\ub85c ",(0,r.jsx)(n.code,{children:"get_sales_by_nft_contract_id"})," \ud568\uc218\ub97c \ud638\ucd9c\ud558\uc5ec \uc9c0\uc815\ub41c NFT \ucee8\ud2b8\ub799\ud2b8\uc5d0\uc11c \ubc1c\uc0dd\ud55c \ub9ac\uc2a4\ud305\uc5d0 \ub300\ud55c \uc815\ubcf4\ub97c \ucffc\ub9ac\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'near contract call-function as-read-only $MARKETPLACE_CONTRACT_ID get_sales_by_nft_contract_id json-args \'{"nft_contract_id": "\'$NFT_CONTRACT_ID\'", "from_index": "0", "limit": 5}\' network-config testnet now\n'})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"\uacb0\ub860",children:"\uacb0\ub860"}),"\n",(0,r.jsxs)(n.p,{children:["\uc774 \ud29c\ud1a0\ub9ac\uc5bc\uc5d0\uc11c\ub294 \ub9c8\ucf13\ud50c\ub808\uc774\uc2a4 \ucee8\ud2b8\ub799\ud2b8\uc758 \uae30\ubcf8 \uc0ac\ud56d\uacfc \uc791\ub3d9 \ubc29\uc2dd\uc5d0 \ub300\ud574 \ubc30\uc6e0\uc2b5\ub2c8\ub2e4. ",(0,r.jsx)(n.a,{href:"#lib-rs",children:"lib.rs"})," \ud30c\uc77c\uc744 \ud6d1\uc5b4\ubcf4\uba70 ",(0,r.jsx)(n.a,{href:"#storage-management-model",children:"\uc2a4\ud1a0\ub9ac\uc9c0 \uad00\ub9ac"})," \ubaa8\ub378 \uc678\uc5d0 ",(0,r.jsx)(n.a,{href:"#initialization-function",children:"\ucd08\uae30\ud654 \ud568\uc218"}),"\uc5d0 \ub300\ud574\uc11c\ub3c4 \ubc30\uc6e0\uc2b5\ub2c8\ub2e4."]}),"\n",(0,r.jsxs)(n.p,{children:["You went through the ",(0,r.jsx)(n.a,{href:"#listing-logic",children:"NFTs listing process"}),". In addition, you went through some important functions needed after you've listed an NFT. \uc5ec\uae30\uc5d0\ub294 ",(0,r.jsx)(n.a,{href:"#removing-sales",children:"\ub9ac\uc2a4\ud305 \uc81c\uac70"}),", ",(0,r.jsx)(n.a,{href:"#updating-price",children:"\uac00\uaca9 \uc5c5\ub370\uc774\ud2b8"})," \ubc0f ",(0,r.jsx)(n.a,{href:"#purchasing-nfts",children:"NFT \uad6c\ub9e4"}),"\uac00 \ud3ec\ud568\ub429\ub2c8\ub2e4."]}),"\n",(0,r.jsxs)(n.p,{children:["\ub9c8\uc9c0\ub9c9\uc73c\ub85c ",(0,r.jsx)(n.a,{href:"#sale_view-rs",children:(0,r.jsx)(n.code,{children:"sale_view"})})," \ud30c\uc77c\uc5d0 \uc788\ub294 \uc5f4\uac70 \uba54\uc11c\ub4dc\ub97c \uc0b4\ud3b4\ubcf4\uc558\uc2b5\ub2c8\ub2e4. \uc774\ub97c \ud1b5\ud574 \ub9c8\ucf13\ud50c\ub808\uc774\uc2a4 \ucee8\ud2b8\ub799\ud2b8\uc5d0 \uc788\ub294 \uc911\uc694\ud55c \uc815\ubcf4\ub97c \ucffc\ub9ac\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4."]}),"\n",(0,r.jsxs)(n.p,{children:["\uc774\uc81c NEAR\uc758 NFT \ubc0f \ub9c8\ucf13\ud50c\ub808\uc774\uc2a4 \ub300\ud574 \ud655\uc2e4\ud558\uac8c \uc774\ud574\ud558\uc168\uc744 \uac83\uc785\ub2c8\ub2e4. \uc790\uc720\ub86d\uac8c \uc218\uc815\ud558\uace0 \uc774\ub7ec\ud55c \ucee8\ud2b8\ub799\ud2b8\ub97c \ud655\uc7a5\ud558\uc5ec \uc6d0\ud558\ub294 \uba4b\uc9c4 \uc560\ud50c\ub9ac\ucf00\uc774\uc158\uc744 \ub9cc\ub4e4 \uc218 \uc788\uc2b5\ub2c8\ub2e4. ",(0,r.jsx)(n.a,{href:"/ko/tutorials/nfts/series",children:"\ub2e4\uc74c \ud29c\ud1a0\ub9ac\uc5bc"}),"\uc5d0\uc11c\ub294 \uae30\uc874 NFT \ucee8\ud2b8\ub799\ud2b8\ub97c \uc0ac\uc6a9\ud558\uc5ec \ub2e4\uc74c\uc744 \ud5c8\uc6a9\ud558\ub3c4\ub85d \ucd5c\uc801\ud654\ud558\ub294 \ubc29\ubc95\uc744 \ubc30\uc6c1\ub2c8\ub2e4."]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"\uac8c\uc73c\ub978 \ubc1c\ud589(Lazy Minting)"}),"\n",(0,r.jsx)(n.li,{children:"\uceec\ub809\uc158 \ub9cc\ub4e4\uae30"}),"\n",(0,r.jsx)(n.li,{children:"\ud5c8\uc6a9 \ubaa9\ub85d \uae30\ub2a5"}),"\n",(0,r.jsx)(n.li,{children:"\ucd5c\uc801\ud654\ub41c \uc2a4\ud1a0\ub9ac\uc9c0 \ubaa8\ub378"}),"\n"]}),"\n",(0,r.jsxs)(n.admonition,{title:"\ubb38\uc11c \ubc84\uc804 \uad00\ub9ac",type:"note",children:[(0,r.jsx)(n.p,{children:"\uc774 \uae00\uc744 \uc4f0\ub294 \uc2dc\uc810\uc5d0\uc11c \uc774 \uc608\uc81c\ub294 \ub2e4\uc74c \ubc84\uc804\uc5d0\uc11c \uc791\ub3d9\ud569\ub2c8\ub2e4."}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["rustc: ",(0,r.jsx)(n.code,{children:"1.77.1"})]}),"\n",(0,r.jsxs)(n.li,{children:["near-cli-rs: ",(0,r.jsx)(n.code,{children:"0.11.0"})]}),"\n",(0,r.jsxs)(n.li,{children:["cargo-near ",(0,r.jsx)(n.code,{children:"0.6.1"})]}),"\n",(0,r.jsxs)(n.li,{children:["NFT standard: ",(0,r.jsx)(n.a,{href:"https://nomicon.io/Standards/Tokens/NonFungibleToken/Core",children:"NEP171"}),", version ",(0,r.jsx)(n.code,{children:"1.0.0"})]}),"\n"]})]})]})}function u(e={}){const{wrapper:n}={...(0,a.a)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(h,{...e})}):h(e)}},85162:(e,n,t)=>{t.d(n,{Z:()=>i});t(67294);var r=t(36905);const a={tabItem:"tabItem_Ymn6"};var s=t(85893);function i(e){var n=e.children,t=e.hidden,i=e.className;return(0,s.jsx)("div",{role:"tabpanel",className:(0,r.Z)(a.tabItem,i),hidden:t,children:n})}},74866:(e,n,t)=>{t.d(n,{Z:()=>T});var r=t(67294),a=t(36905),s=t(12466),i=t(16550),l=t(20469),o=t(91980),c=t(67392),d=t(20812);function h(e){var n,t;return null!=(n=null==(t=r.Children.toArray(e).filter((function(e){return"\n"!==e})).map((function(e){if(!e||(0,r.isValidElement)(e)&&((n=e.props)&&"object"==typeof n&&"value"in n))return e;var n;throw new Error("Docusaurus error: Bad <Tabs> child <"+("string"==typeof e.type?e.type:e.type.name)+'>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.')})))?void 0:t.filter(Boolean))?n:[]}function u(e){var n=e.values,t=e.children;return(0,r.useMemo)((function(){var e=null!=n?n:function(e){return h(e).map((function(e){var n=e.props;return{value:n.value,label:n.label,attributes:n.attributes,default:n.default}}))}(t);return function(e){var n=(0,c.l)(e,(function(e,n){return e.value===n.value}));if(n.length>0)throw new Error('Docusaurus error: Duplicate values "'+n.map((function(e){return e.value})).join(", ")+'" found in <Tabs>. Every value needs to be unique.')}(e),e}),[n,t])}function p(e){var n=e.value;return e.tabValues.some((function(e){return e.value===n}))}function g(e){var n=e.queryString,t=void 0!==n&&n,a=e.groupId,s=(0,i.k6)(),l=function(e){var n=e.queryString,t=void 0!==n&&n,r=e.groupId;if("string"==typeof t)return t;if(!1===t)return null;if(!0===t&&!r)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return null!=r?r:null}({queryString:t,groupId:a});return[(0,o._X)(l),(0,r.useCallback)((function(e){if(l){var n=new URLSearchParams(s.location.search);n.set(l,e),s.replace(Object.assign({},s.location,{search:n.toString()}))}}),[l,s])]}function f(e){var n,t,a,s,i=e.defaultValue,o=e.queryString,c=void 0!==o&&o,h=e.groupId,f=u(e),m=(0,r.useState)((function(){return function(e){var n,t=e.defaultValue,r=e.tabValues;if(0===r.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(t){if(!p({value:t,tabValues:r}))throw new Error('Docusaurus error: The <Tabs> has a defaultValue "'+t+'" but none of its children has the corresponding value. Available values are: '+r.map((function(e){return e.value})).join(", ")+". If you intend to show no default tab, use defaultValue={null} instead.");return t}var a=null!=(n=r.find((function(e){return e.default})))?n:r[0];if(!a)throw new Error("Unexpected error: 0 tabValues");return a.value}({defaultValue:i,tabValues:f})})),x=m[0],j=m[1],b=g({queryString:c,groupId:h}),v=b[0],_=b[1],T=(n=function(e){return e?"docusaurus.tab."+e:null}({groupId:h}.groupId),t=(0,d.Nk)(n),a=t[0],s=t[1],[a,(0,r.useCallback)((function(e){n&&s.set(e)}),[n,s])]),N=T[0],y=T[1],w=function(){var e=null!=v?v:N;return p({value:e,tabValues:f})?e:null}();return(0,l.Z)((function(){w&&j(w)}),[w]),{selectedValue:x,selectValue:(0,r.useCallback)((function(e){if(!p({value:e,tabValues:f}))throw new Error("Can't select invalid tab value="+e);j(e),_(e),y(e)}),[_,y,f]),tabValues:f}}var m=t(72389);const x={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};var j=t(85893);function b(e){var n=e.className,t=e.block,r=e.selectedValue,i=e.selectValue,l=e.tabValues,o=[],c=(0,s.o5)().blockElementScrollPositionUntilNextRender,d=function(e){var n=e.currentTarget,t=o.indexOf(n),a=l[t].value;a!==r&&(c(n),i(a))},h=function(e){var n,t=null;switch(e.key){case"Enter":d(e);break;case"ArrowRight":var r,a=o.indexOf(e.currentTarget)+1;t=null!=(r=o[a])?r:o[0];break;case"ArrowLeft":var s,i=o.indexOf(e.currentTarget)-1;t=null!=(s=o[i])?s:o[o.length-1]}null==(n=t)||n.focus()};return(0,j.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,a.Z)("tabs",{"tabs--block":t},n),children:l.map((function(e){var n=e.value,t=e.label,s=e.attributes;return(0,j.jsx)("li",Object.assign({role:"tab",tabIndex:r===n?0:-1,"aria-selected":r===n,ref:function(e){return o.push(e)},onKeyDown:h,onClick:d},s,{className:(0,a.Z)("tabs__item",x.tabItem,null==s?void 0:s.className,{"tabs__item--active":r===n}),children:null!=t?t:n}),n)}))})}function v(e){var n=e.lazy,t=e.children,a=e.selectedValue,s=(Array.isArray(t)?t:[t]).filter(Boolean);if(n){var i=s.find((function(e){return e.props.value===a}));return i?(0,r.cloneElement)(i,{className:"margin-top--md"}):null}return(0,j.jsx)("div",{className:"margin-top--md",children:s.map((function(e,n){return(0,r.cloneElement)(e,{key:n,hidden:e.props.value!==a})}))})}function _(e){var n=f(e);return(0,j.jsxs)("div",{className:(0,a.Z)("tabs-container",x.tabList),children:[(0,j.jsx)(b,Object.assign({},n,e)),(0,j.jsx)(v,Object.assign({},n,e))]})}function T(e){var n=(0,m.Z)();return(0,j.jsx)(_,Object.assign({},e,{children:h(e.children)}),String(n))}},71183:(e,n,t)=>{t.d(n,{O2:()=>g,Ey:()=>m,SQ:()=>f});var r=t(67294),a=t(74866),s=t(85162),i=t(74165),l=t(15861),o=t(1841),c=t.n(o),d=t(85893);function h(){return(h=(0,l.Z)((0,i.Z)().mark((function e(n,t,r){var a,s,l,o;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!((s=localStorage.getItem(n+"-until"))&&s>Date.now())){e.next=5;break}a=localStorage.getItem(n),e.next=18;break;case 5:return e.prev=5,e.next=8,fetch(n);case 8:return e.next=10,e.sent.text();case 10:a=e.sent,localStorage.setItem(n,a),localStorage.setItem(n+"-until",Date.now()+6e4),e.next=18;break;case 15:return e.prev=15,e.t0=e.catch(5),e.abrupt("return","Error fetching code, please try reloading");case 18:return l=a.split("\n"),t=t?Number(t)-1:0,r=r?Number(r):l.length,l=l.slice(t,r),o=l.reduce((function(e,n){if(0===n.length)return e;var t=n.match(/^\s+/);return t?Math.min(e,t[0].length):0}),1/0),e.abrupt("return",l.map((function(e){return e.slice(o)})).join("\n"));case 24:case"end":return e.stop()}}),e,null,[[5,15]])})))).apply(this,arguments)}const u=function(e){var n=e.url,t=e.start,a=e.end,s=e.language,i=e.fname,l=e.metastring,o=(0,r.useState)("Loading..."),u=o[0],p=o[1];return(0,r.useEffect)((function(){var e=function(e){var n=e.slice(e.indexOf("https")).split("#"),t=n[0],r=(n[1],new URL(t).pathname.split("/").slice(1)),a=r[0],s=r[1];return r[2],"https://raw.githubusercontent.com/"+a+"/"+s+"/"+r[3]+"/"+r.slice(4).join("/")}(n),r=function(e,n,t){return h.apply(this,arguments)}(e,t,a);r.then((function(e){return p(e)}))})),(0,d.jsxs)("div",{fname:i,children:[(0,d.jsx)(c(),{language:s,metastring:l+" showLineNumbers",children:u}),(0,d.jsx)("div",{style:{fontSize:"0.9em",fontWeight:600,color:"rgb(14, 117, 221)",textAlign:"center",paddingBottom:"13px",textDecoration:"underline"},children:(0,d.jsx)("a",{href:n,target:"_blank",rel:"noreferrer noopener",children:"See full example on GitHub"})})]})};var p={rust:"\ud83e\udd80 Rust",js:"\ud83c\udf10 Javascript",ts:"\ud83c\udf10 Typescript"};function g(e){var n=e.children;return Array.isArray(n)||(n=[n]),(0,d.jsx)(a.Z,{className:"language-tabs",groupId:"code-tabs",children:n.map((function(e,n){return(0,d.jsx)(s.Z,{value:e.props.value,label:p[e.props.value],children:e})}))})}function f(e){var n=e.children,t=e.language,r=e.showSingleFName;return Array.isArray(n)||(n=[n]),n=n.map((function(e){return function(e,n){var t=e.props,r=(t.children,t.url),a=t.start,s=t.end,i=t.fname;if(e.type===m)return m({url:r,start:a,end:s,language:n,fname:i});return e}(e,t)})),1!=n.length||r?(0,d.jsx)(a.Z,{className:"file-tabs",children:n.map((function(e,n){return(0,d.jsx)(s.Z,{value:n,label:e.props.fname,children:e})}))}):(0,d.jsx)(s.Z,{value:0,label:n[0].props.fname,children:n[0]})}function m(e){var n=e.url,t=e.start,r=e.end,a=e.language,s=e.fname,i=e.metastring;return u({url:n,start:t,end:r,language:a,fname:s,metastring:i})}}}]);