"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[8250],{74018:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>s,default:()=>h,frontMatter:()=>l,metadata:()=>i,toc:()=>d});var a=n(85893),r=n(11151),o=n(71183);const l={id:"royalty",title:"\ub85c\uc5f4\ud2f0",sidebar_label:"\ub85c\uc5f4\ud2f0"},s=void 0,i={id:"tutorials/nfts/royalty",title:"\ub85c\uc5f4\ud2f0",description:"\uc774 \ud29c\ud1a0\ub9ac\uc5bc\uc5d0\uc11c\ub294 NFT(Non-Fungible Token) \uc2a4\ub9c8\ud2b8 \ucee8\ud2b8\ub799\ud2b8\ub97c \uacc4\uc18d \uad6c\ucd95\ud558\uace0, NFT\uc5d0 \uc601\uad6c \ub85c\uc5f4\ud2f0\ub97c \uad6c\ud604\ud558\ub294 \ubc29\ubc95\uc744 \ubc30\uc6c1\ub2c8\ub2e4. \uc774\ub97c \ud1b5\ud574 \uc0ac\ub78c\ub4e4\uc740 NFT\uac00 \ud310\ub9e4\ub420 \ub54c \uad6c\ub9e4 \uac00\uaca9\uc758 \uc77c\uc815 \ube44\uc728\uc744 \uc5bb\uc744 \uc218 \uc788\uc2b5\ub2c8\ub2e4.",source:"@site/i18n/ko/docusaurus-plugin-content-docs/current/3.tutorials/nfts/6-royalty.md",sourceDirName:"3.tutorials/nfts",slug:"/tutorials/nfts/royalty",permalink:"/ko/tutorials/nfts/royalty",draft:!1,unlisted:!1,editUrl:"https://github.com/near/docs/edit/master/website/../docs/3.tutorials/nfts/6-royalty.md",tags:[],version:"current",lastUpdatedBy:"Github Actions",lastUpdatedAt:1719825734e3,sidebarPosition:6,frontMatter:{id:"royalty",title:"\ub85c\uc5f4\ud2f0",sidebar_label:"\ub85c\uc5f4\ud2f0"},sidebar:"tutorials",previous:{title:"\ub9c8\ucf13\ud50c\ub808\uc774\uc2a4",permalink:"/ko/tutorials/nfts/marketplace"},next:{title:"\uac8c\uc73c\ub978 \ubc1c\ud589, \uceec\ub809\uc158 \ub4f1!",permalink:"/ko/tutorials/nfts/series"}},c={},d=[{value:"\uc18c\uac1c",id:"\uc18c\uac1c",level:2},{value:"\ubb38\uc81c\uc5d0 \ub300\ud55c \uc0dd\uac01",id:"\ubb38\uc81c\uc5d0-\ub300\ud55c-\uc0dd\uac01",level:2},{value:"\ud604\uc7ac \uc194\ub8e8\uc158 \ud655\uc7a5",id:"\ud604\uc7ac-\uc194\ub8e8\uc158-\ud655\uc7a5",level:3},{value:"\ucee8\ud2b8\ub799\ud2b8 \uc218\uc815",id:"\ucee8\ud2b8\ub799\ud2b8-\uc218\uc815",level:2},{value:"\ub0b4\ubd80 \ud5ec\ud37c \ud568\uc218",id:"\ub0b4\ubd80-\ud5ec\ud37c-\ud568\uc218",level:3},{value:"\ub85c\uc5f4\ud2f0",id:"\ub85c\uc5f4\ud2f0",level:3},{value:"\uc601\uad6c \ub85c\uc5f4\ud2f0",id:"\uc601\uad6c-\ub85c\uc5f4\ud2f0",level:3},{value:"\uad6c\uc870\uccb4 \uad6c\ud604\uc5d0 \ub85c\uc5f4\ud2f0 \uac1d\uccb4 \ucd94\uac00",id:"\uad6c\uc870\uccb4-\uad6c\ud604\uc5d0-\ub85c\uc5f4\ud2f0-\uac1d\uccb4-\ucd94\uac00",level:3},{value:"\ucee8\ud2b8\ub799\ud2b8 \ubc30\ud3ec",id:"redeploying-contract",level:2},{value:"Deployment and initialization",id:"deployment-and-initialization",level:3},{value:"Minting",id:"minting",level:3},{value:"NFT \uc9c0\uae09",id:"nft-\uc9c0\uae09",level:3},{value:"\uacb0\ub860",id:"\uacb0\ub860",level:2}];function u(e){const t={a:"a",admonition:"admonition",code:"code",em:"em",h2:"h2",h3:"h3",hr:"hr",li:"li",mdxAdmonitionTitle:"mdxAdmonitionTitle",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.a)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(t.p,{children:"\uc774 \ud29c\ud1a0\ub9ac\uc5bc\uc5d0\uc11c\ub294 NFT(Non-Fungible Token) \uc2a4\ub9c8\ud2b8 \ucee8\ud2b8\ub799\ud2b8\ub97c \uacc4\uc18d \uad6c\ucd95\ud558\uace0, NFT\uc5d0 \uc601\uad6c \ub85c\uc5f4\ud2f0\ub97c \uad6c\ud604\ud558\ub294 \ubc29\ubc95\uc744 \ubc30\uc6c1\ub2c8\ub2e4. \uc774\ub97c \ud1b5\ud574 \uc0ac\ub78c\ub4e4\uc740 NFT\uac00 \ud310\ub9e4\ub420 \ub54c \uad6c\ub9e4 \uac00\uaca9\uc758 \uc77c\uc815 \ube44\uc728\uc744 \uc5bb\uc744 \uc218 \uc788\uc2b5\ub2c8\ub2e4."}),"\n",(0,a.jsx)(t.h2,{id:"\uc18c\uac1c",children:"\uc18c\uac1c"}),"\n",(0,a.jsxs)(t.p,{children:["\uc9c0\uae08\ucbe4\uc774\uba74 \ub85c\uc5f4\ud2f0 \uc9c0\uc6d0\uc744 \uc81c\uc678\ud558\uace0\ub294 \uc644\uc804\ud55c NFT \ucee8\ud2b8\ub799\ud2b8\uac00 \uc788\uc5b4\uc57c \ud569\ub2c8\ub2e4. To get started, go to the ",(0,a.jsx)(t.code,{children:"nft-contract-approval/"})," folder from our ",(0,a.jsx)(t.a,{href:"https://github.com/near-examples/nft-tutorial/",children:"GitHub repository"}),", or continue your work from the previous tutorials."]}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-bash",children:"cd nft-contract-approval/\n"})}),"\n",(0,a.jsxs)(t.admonition,{type:"tip",children:[(0,a.jsxs)(t.mdxAdmonitionTitle,{children:["If you wish to see the finished code for this ",(0,a.jsx)(t.em,{children:"Royalty"})," tutorial, you can find it in the ",(0,a.jsx)(t.code,{children:"nft-contract-royalty"})," folder. :::"]}),(0,a.jsx)(t.hr,{}),(0,a.jsx)(t.h2,{id:"\ubb38\uc81c\uc5d0-\ub300\ud55c-\uc0dd\uac01",children:"\ubb38\uc81c\uc5d0 \ub300\ud55c \uc0dd\uac01"}),(0,a.jsxs)(t.p,{children:["\ub85c\uc5f4\ud2f0 \uae30\ub2a5\uc744 \uad6c\ud604\ud558\ub824\uba74, \uba3c\uc800 NFT \ud310\ub9e4 \ubc29\uc2dd\uc744 \uc774\ud574\ud574\uc57c \ud569\ub2c8\ub2e4. \uc774\uc804 \ud29c\ud1a0\ub9ac\uc5bc\uc5d0\uc11c\ub294, NFT\ub97c \uac00\uc9c4 \uc0ac\ub78c\uc774 \uc801\uc808\ud558\uac8c \ub514\ucf54\ub529\ud560 \uc218 \uc788\ub294 \uba54\uc2dc\uc9c0\ub97c \uc804\ub2ec\ud558\uc5ec ",(0,a.jsx)(t.code,{children:"nft_approve"})," \ud568\uc218\ub97c \ud1b5\ud574 \ub9c8\ucf13\ud50c\ub808\uc774\uc2a4\uc5d0 NFT\ub97c \ub9ac\uc2a4\ud305\ud558\ub294 \uac83\uc744 \ubcf4\uc558\uc2b5\ub2c8\ub2e4. \uc0ac\uc6a9\uc790\uac00 \ub9c8\ucf13\ud50c\ub808\uc774\uc2a4\uc5d0\uc11c NFT\ub97c \uad6c\ub9e4\ud558\uba74 \uc5b4\ub5a4 \uc77c\uc774 \uc77c\uc5b4\ub098\ub098\uc694?"]}),(0,a.jsxs)(t.p,{children:["\uc9c0\uae08 \uac00\uc9c0\uace0 \uc788\ub294 \uc9c0\uc2dd\uc744 \uc0ac\uc6a9\ud588\uc744 \ub54c\uc758 \ud569\ub9ac\uc801\uc778 \uacb0\ub860\uc740, \ub9c8\ucf13\ud50c\ub808\uc774\uc2a4\uac00 \uad50\ucc28 \ucee8\ud2b8\ub799\ud2b8 \ud638\ucd9c\uc744 \uc218\ud589\ud558\uc5ec NFT\ub97c \uad6c\ub9e4\uc790\uc5d0\uac8c \uc804\uc1a1\ud558\uace0, NFT \ucee8\ud2b8\ub799\ud2b8\uc758 ",(0,a.jsx)(t.code,{children:"nft_transfer"})," \uba54\uc11c\ub4dc\ub97c \ud638\ucd9c\ud558\ub294 \uac83\uc785\ub2c8\ub2e4. \ud574\ub2f9 \ud568\uc218\uac00, \uc644\ub8cc\ub418\uba74 \ub9c8\ucf13\ud50c\ub808\uc774\uc2a4\ub294 \uad6c\ub9e4\uc790\uac00 \uc9c0\ubd88\ud55c \uc815\ud655\ud55c \uae08\uc561\uc744 \ud310\ub9e4\uc790\uc5d0\uac8c \uc9c0\ubd88\ud569\ub2c8\ub2e4."]}),(0,a.jsx)(t.p,{children:"\uc774\uc81c \ud310\ub9e4\uc790\uac00 \uc544\ub2cc \ub2e4\ub978 \uacc4\uc815\uc73c\ub85c \uac00\ub294 \uae08\uc561\uc744 \uc0ad\uac10\ud560 \uc218 \uc788\ub3c4\ub85d \ud655\uc7a5\ud560 \uc218 \uc788\ub294 \ubc29\ubc95\uc5d0 \ub300\ud574 \uc0dd\uac01\ud574 \ubcf4\uaca0\uc2b5\ub2c8\ub2e4."}),(0,a.jsx)("hr",{class:"subsection"}),(0,a.jsx)(t.h3,{id:"\ud604\uc7ac-\uc194\ub8e8\uc158-\ud655\uc7a5",children:"\ud604\uc7ac \uc194\ub8e8\uc158 \ud655\uc7a5"}),(0,a.jsxs)(t.p,{children:["Since perpetual royalties will be on a per-token basis, it's safe to assume that you should be changing the ",(0,a.jsx)(t.code,{children:"Token"})," and ",(0,a.jsx)(t.code,{children:"JsonToken"})," structs. You need some way of keeping track of what percentage each account with a royalty should have. If you introduce a map of an account to an integer, that should do the trick."]}),(0,a.jsx)(t.p,{children:"Now, you need some way to relay that information to the marketplace. This method should be able to transfer the NFT exactly like the old solution but with the added benefit of telling the marketplace exactly what accounts should be paid what amounts. If you implement a method that transfers the NFT and then calculates exactly what accounts get paid and to what amount based on a passed-in balance, that should work nicely."}),(0,a.jsxs)(t.p,{children:["This is what the ",(0,a.jsx)(t.a,{href:"https://nomicon.io/Standards/NonFungibleToken/Payout",children:"royalty standards"})," outlined. Let's now move on and modify our smart contract to introduce this behavior."]}),(0,a.jsx)(t.hr,{}),(0,a.jsx)(t.h2,{id:"\ucee8\ud2b8\ub799\ud2b8-\uc218\uc815",children:"\ucee8\ud2b8\ub799\ud2b8 \uc218\uc815"}),(0,a.jsxs)(t.p,{children:["The first thing you'll want to do is add the royalty information to the structs. Open the ",(0,a.jsx)(t.code,{children:"nft-contract-approval/src/metadata.rs"})," file and add ",(0,a.jsx)(t.code,{children:"royalty"})," to the ",(0,a.jsx)(t.code,{children:"Token"})," struct:"]}),(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-rust",children:"pub royalty: HashMap<AccountId, u32>,\n"})}),(0,a.jsxs)(t.p,{children:["Second, you'll want to add ",(0,a.jsx)(t.code,{children:"royalty"})," to the ",(0,a.jsx)(t.code,{children:"JsonToken"})," struct as well:"]}),(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-rust",children:"pub royalty: HashMap<AccountId, u32>,\n"})}),(0,a.jsx)("hr",{class:"subsection"}),(0,a.jsx)(t.h3,{id:"\ub0b4\ubd80-\ud5ec\ud37c-\ud568\uc218",children:"\ub0b4\ubd80 \ud5ec\ud37c \ud568\uc218"}),(0,a.jsx)(t.p,{children:(0,a.jsx)(t.strong,{children:"royalty_to_payout"})}),(0,a.jsxs)(t.p,{children:["To simplify the payout calculation, let's add a helper ",(0,a.jsx)(t.code,{children:"royalty_to_payout"})," function to ",(0,a.jsx)(t.code,{children:"src/internal.rs"}),". This will convert a percentage to the actual amount that should be paid. In order to allow for percentages less than 1%, you can give 100% a value of ",(0,a.jsx)(t.code,{children:"10,000"}),". This means that the minimum percentage you can give out is 0.01%, or ",(0,a.jsx)(t.code,{children:"1"}),". For example, if you wanted the account ",(0,a.jsx)(t.code,{children:"benji.testnet"})," to have a perpetual royalty of 20%, you would insert the pair ",(0,a.jsx)(t.code,{children:'"benji.testnet": 2000'})," into the payout map."]}),(0,a.jsx)(o.Ey,{language:"rust",start:"5",end:"8",url:"https://github.com/near-examples/nft-tutorial/blob/main/nft-contract-royalty/src/internal.rs"}),(0,a.jsxs)(t.p,{children:["If you were to use the ",(0,a.jsx)(t.code,{children:"royalty_to_payout"})," function and pass in ",(0,a.jsx)(t.code,{children:"2000"})," as the ",(0,a.jsx)(t.code,{children:"royalty_percentage"})," and an ",(0,a.jsx)(t.code,{children:"amount_to_pay"})," of 1 NEAR, it would return a value of 0.2 NEAR."]}),(0,a.jsx)("hr",{class:"subsection"}),(0,a.jsx)(t.h3,{id:"\ub85c\uc5f4\ud2f0",children:"\ub85c\uc5f4\ud2f0"}),(0,a.jsx)(t.p,{children:(0,a.jsx)(t.strong,{children:"nft_payout"})}),(0,a.jsxs)(t.p,{children:["Let's now implement a method to check what accounts will be paid out for an NFT given an amount, or balance. Open the ",(0,a.jsx)(t.code,{children:"nft-contract/src/royalty.rs"})," file, and modify the ",(0,a.jsx)(t.code,{children:"nft_payout"})," function as shown."]}),(0,a.jsx)(o.Ey,{language:"rust",start:"22",end:"67",url:"https://github.com/near-examples/nft-tutorial/blob/main/nft-contract-royalty/src/royalty.rs"}),(0,a.jsxs)(t.p,{children:["This function will loop through the token's royalty map and take the balance and convert that to a payout using the ",(0,a.jsx)(t.code,{children:"royalty_to_payout"})," function you created earlier. It will give the owner of the token whatever is left from the total royalties. As an example:"]}),(0,a.jsx)(t.p,{children:"You have a token with the following royalty field:"}),(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-rust",children:'Token {\n    owner_id: "damian",\n    royalty: {\n        "benji": 1000,\n        "josh": 500,\n        "mike": 2000\n    }\n}\n'})}),(0,a.jsxs)(t.p,{children:["If a user were to call ",(0,a.jsx)(t.code,{children:"nft_payout"})," on the token and pass in a balance of 1 NEAR, it would loop through the token's royalty field and insert the following into the payout object:"]}),(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-rust",children:'Payout {\n    payout: {\n        "benji": 0.1 NEAR,\n        "josh": 0.05 NEAR,\n        "mike": 0.2 NEAR\n    }\n}\n'})}),(0,a.jsxs)(t.p,{children:["At the very end, it will insert ",(0,a.jsx)(t.code,{children:"damian"})," into the payout object and give him ",(0,a.jsx)(t.code,{children:"1 NEAR - 0.1 - 0.05 - 0.2 = 0.65 NEAR"}),"."]}),(0,a.jsx)(t.p,{children:(0,a.jsx)(t.strong,{children:"nft_transfer_payout"})}),(0,a.jsx)(t.p,{children:"Now that you know how payouts are calculated, it's time to create the function that will transfer the NFT and return the payout to the marketplace."}),(0,a.jsx)(o.Ey,{language:"rust",start:"68",end:"135",url:"https://github.com/near-examples/nft-tutorial/blob/main/nft-contract-royalty/src/royalty.rs"}),(0,a.jsx)("hr",{class:"subsection"}),(0,a.jsx)(t.h3,{id:"\uc601\uad6c-\ub85c\uc5f4\ud2f0",children:"\uc601\uad6c \ub85c\uc5f4\ud2f0"}),(0,a.jsxs)(t.p,{children:["To add support for perpetual royalties, let's edit the ",(0,a.jsx)(t.code,{children:"src/mint.rs"})," file. First, add an optional parameter for perpetual royalties. This is what will determine what percentage goes to which accounts when the NFT is purchased. You will also need to create and insert the royalty to be put in the ",(0,a.jsx)(t.code,{children:"Token"})," object:"]}),(0,a.jsx)(o.Ey,{language:"rust",start:"6",end:"80",url:"https://github.com/near-examples/nft-tutorial/blob/main/nft-contract-royalty/src/mint.rs"}),(0,a.jsxs)(t.p,{children:["Next, you can use the CLI to query the new ",(0,a.jsx)(t.code,{children:"nft_payout"})," function and validate that it works correctly."]}),(0,a.jsx)(t.h3,{id:"\uad6c\uc870\uccb4-\uad6c\ud604\uc5d0-\ub85c\uc5f4\ud2f0-\uac1d\uccb4-\ucd94\uac00",children:"\uad6c\uc870\uccb4 \uad6c\ud604\uc5d0 \ub85c\uc5f4\ud2f0 \uac1d\uccb4 \ucd94\uac00"}),(0,a.jsxs)(t.p,{children:["Since you've added a new field to your ",(0,a.jsx)(t.code,{children:"Token"})," and ",(0,a.jsx)(t.code,{children:"JsonToken"})," structs, you need to edit your implementations accordingly. Move to the ",(0,a.jsx)(t.code,{children:"nft-contract/src/internal.rs"})," file and edit the part of your ",(0,a.jsx)(t.code,{children:"internal_transfer"})," function that creates the new ",(0,a.jsx)(t.code,{children:"Token"})," object:"]}),(0,a.jsx)(o.Ey,{language:"rust",start:"184",end:"192",url:"https://github.com/near-examples/nft-tutorial/blob/main/nft-contract-royalty/src/internal.rs"}),(0,a.jsxs)(t.p,{children:["Once that's finished, move to the ",(0,a.jsx)(t.code,{children:"nft-contract-approval/src/nft_core.rs"})," file. You need to edit your implementation of ",(0,a.jsx)(t.code,{children:"nft_token"})," so that the ",(0,a.jsx)(t.code,{children:"JsonToken"})," sends back the new royalty information."]}),(0,a.jsx)(o.Ey,{language:"rust",start:"160",end:"177",url:"https://github.com/near-examples/nft-tutorial/blob/main/nft-contract-royalty/src/nft_core.rs"}),(0,a.jsx)(t.hr,{}),(0,a.jsx)(t.h2,{id:"redeploying-contract",children:"\ucee8\ud2b8\ub799\ud2b8 \ubc30\ud3ec"}),(0,a.jsx)(t.p,{children:"As you saw in the previous tutorial, adding changes like these will cause problems when redeploying. Since these changes affect all the other tokens and the state won't be able to automatically be inherited by the new code, simply redeploying the contract will lead to errors. For this reason, you'll create a new account again."}),(0,a.jsx)(t.h3,{id:"deployment-and-initialization",children:"Deployment and initialization"}),(0,a.jsx)(t.p,{children:"Next, you'll deploy this contract to the network."}),(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-bash",children:"export ROYALTY_NFT_CONTRACT_ID=<accountId>\nnear account create-account sponsor-by-faucet-service $ROYALTY_NFT_CONTRACT_ID autogenerate-new-keypair save-to-legacy-keychain network-config testnet create\n"})}),(0,a.jsx)(t.p,{children:"Using the cargo-near, deploy and initialize the contract as you did in the previous tutorials:"}),(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-bash",children:"cargo near deploy $ROYALTY_NFT_CONTRACT_ID with-init-call new_default_meta json-args '{\"owner_id\": \"'$ROYALTY_NFT_CONTRACT_ID'\"}' prepaid-gas '100.0 Tgas' attached-deposit '0 NEAR' network-config testnet sign-with-keychain send\n"})}),(0,a.jsx)(t.h3,{id:"minting",children:"Minting"}),(0,a.jsxs)(t.p,{children:["\ub2e4\uc74c\uc73c\ub85c \ud1a0\ud070\uc744 \ubc1c\ud589\ud574\uc57c \ud569\ub2c8\ub2e4. \uc774 \uba85\ub839\uc744 \uc2e4\ud589\ud558\uba74 \ud1a0\ud070 ID ",(0,a.jsx)(t.code,{children:'"royalty-token"'}),"\ub85c \ud1a0\ud070\uc774 \ubc1c\ud589\ub418\uace0, \uc218\uc2e0\uc790\uac00 \uc0c8 \uacc4\uc815\uc774 \ub429\ub2c8\ub2e4. \ub610\ud55c \ud1a0\ud070\uc774 \ud310\ub9e4\ub420 \ub54c\ub9c8\ub2e4 \uc601\uad6c \ub85c\uc5f4\ud2f0\ub97c \ubc1b\ub294 \ub450 \uac1c\uc758 \uacc4\uc815\uc744 \ud3ec\ud568\ud55c \ub9f5\uc744 \uc804\ub2ec\ud569\ub2c8\ub2e4."]}),(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-bash",children:'near contract call-function as-transaction $ROYALTY_NFT_CONTRACT_ID nft_mint json-args \'{"token_id": "royalty-token", "metadata": {"title": "Royalty Token", "description": "testing out the new royalty extension of the standard", "media": "https://bafybeiftczwrtyr3k7a2k4vutd3amkwsmaqyhrdzlhvpt33dyjivufqusq.ipfs.dweb.link/goteam-gif.gif"}, "receiver_id": "\'$ROYALTY_NFT_CONTRACT_ID\'", "perpetual_royalties": {"benjiman.testnet": 2000, "mike.testnet": 1000, "josh.testnet": 500}}\' prepaid-gas \'100.0 Tgas\' attached-deposit \'0.1 NEAR\' sign-as $ROYALTY_NFT_CONTRACT_ID network-config testnet sign-with-legacy-keychain send\n'})}),(0,a.jsx)(t.p,{children:"\uc5f4\uac70(Enumeration) \ud568\uc218 \uc911 \ud558\ub098\ub97c \ud638\ucd9c\ud558\uc5ec \ubaa8\ub4e0 \uac83\uc774 \uc81c\ub300\ub85c \uc9c4\ud589\ub418\uc5c8\ub294\uc9c0 \ud655\uc778\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4."}),(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-bash",children:'near contract call-function as-read-only $ROYALTY_NFT_CONTRACT_ID nft_tokens_for_owner json-args \'{"account_id": "\'$ROYALTY_NFT_CONTRACT_ID\'", "limit": 10}\' network-config testnet now\n'})}),(0,a.jsx)(t.p,{children:"\uadf8\ub7ec\uba74 \ub2e4\uc74c\uacfc \uc720\uc0ac\ud55c \ucd9c\ub825\uc774 \ubc18\ud658\ub429\ub2c8\ub2e4."}),(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-json",children:'[\n  {\n    "token_id": "royalty-token",\n    "owner_id": "royalty.goteam.examples.testnet",\n    "metadata": {\n      "title": "Royalty Token",\n      "description": "testing out the new royalty extension of the standard",\n      "media": "https://bafybeiftczwrtyr3k7a2k4vutd3amkwsmaqyhrdzlhvpt33dyjivufqusq.ipfs.dweb.link/goteam-gif.gif",\n      "media_hash": null,\n      "copies": null,\n      "issued_at": null,\n      "expires_at": null,\n      "starts_at": null,\n      "updated_at": null,\n      "extra": null,\n      "reference": null,\n      "reference_hash": null\n    },\n    "approved_account_ids": {},\n    "royalty": {\n      "josh.testnet": 500,\n      "benjiman.testnet": 2000,\n      "mike.testnet": 1000\n    }\n  }\n]\n'})}),(0,a.jsx)(t.p,{children:"\uc774\uc81c \uc774 NFT\uc758 \uc804\uccb4 \ub9e4\ucd9c\uc758 35%\ub97c \ud569\uc0b0\ud55c 3\uac1c\uc758 \uacc4\uc815\uc744 \ud3ec\ud568\ud558\ub294 \ub85c\uc5f4\ud2f0 \ud544\ub4dc\uac00 \uc5b4\ub5bb\uac8c \uc0dd\uacbc\ub294\uc9c0 \ud655\uc778\ud574 \ubcf4\uc2e4\uae4c\uc694? \uc791\ub3d9\ud558\ub294 \uac83 \uac19\uc2b5\ub2c8\ub2e4! \ud654\uc774\ud305 :)"}),(0,a.jsx)(t.h3,{id:"nft-\uc9c0\uae09",children:"NFT \uc9c0\uae09"}),(0,a.jsxs)(t.p,{children:["Let's calculate the payout for the ",(0,a.jsx)(t.code,{children:'"royalty-token"'})," NFT, given a balance of 100 yoctoNEAR. ",(0,a.jsx)(t.code,{children:"nft_payout"})," \ud568\uc218\ub85c \uc804\ub2ec\ub418\ub294 \uae08\uc561\uc774 yoctoNEAR \ub2e8\uc704\ub85c \ud45c\uc2dc\ub420 \uac83\uc73c\ub85c \uc608\uc0c1\ub41c\ub2e4\ub294 \uc810\uc5d0 \uc720\uc758\ud558\ub294 \uac83\uc774 \uc911\uc694\ud569\ub2c8\ub2e4."]}),(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-bash",children:'near contract call-function as-read-only $ROYALTY_NFT_CONTRACT_ID nft_payout json-args \'{"token_id": "royalty-token", "balance": "100", "max_len_payout": 100}\' network-config testnet now\n'})}),(0,a.jsx)(t.p,{children:"\uc774 \uba85\ub839\uc740 \ub2e4\uc74c\uacfc \uc720\uc0ac\ud55c \ucd9c\ub825\uc744 \ubc18\ud658\ud574\uc57c \ud569\ub2c8\ub2e4."}),(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-js",children:"{\n  payout: {\n    'josh.testnet': '5',\n    'royalty.goteam.examples.testnet': '65',\n    'mike.testnet': '10',\n    'benjiman.testnet': '20'\n  }\n}\n"})}),(0,a.jsxs)(t.p,{children:["If the NFT was sold for 100 yoctoNEAR, josh would get 5, Benji would get 20, mike would get 10, and the owner, in this case ",(0,a.jsx)(t.code,{children:"royalty.goteam.examples.testnet"})," would get the rest: 65."]}),(0,a.jsx)(t.h2,{id:"\uacb0\ub860",children:"\uacb0\ub860"}),(0,a.jsx)(t.p,{children:"\uc774 \uc2dc\uc810\uc5d0\uc11c \ub9c8\ucf13\ud50c\ub808\uc774\uc2a4\uc640 \uc0c1\ud638 \uc791\uc6a9\ud558\uae30 \uc704\ud574 \uc644\ubcbd\ud558\uac8c \uc791\ub3d9\ud558\ub294 NFT \ucee8\ud2b8\ub799\ud2b8\uc5d0 \ud544\uc694\ud55c \ubaa8\ub4e0 \uac83\uc774 \uc874\uc7ac\ud569\ub2c8\ub2e4. \uad6c\ud604\ud560 \uc218 \uc788\ub294 \ub9c8\uc9c0\ub9c9 \ub0a8\uc740 \ud45c\uc900\uc740 \uc774\ubca4\ud2b8 \ud45c\uc900\uc785\ub2c8\ub2e4. \uc774\ub807\uac8c \ud558\uba74 \uc778\ub371\uc11c\ub294 \ud638\ucd9c\ub418\ub294 \ud568\uc218\uc5d0 \ub300\ud574 \uc54c \uc218 \uc788\uae30\uc5d0, \uc9c0\uac11\uc758 \uc218\uc9d1\ud488 \ud0ed\uc744 \ucc44\uc6b0\ub294 \ub370 \uc0ac\uc6a9\ud560 \uc218 \uc788\ub294 \uc815\ubcf4 \ub4f1\uc5d0 \ub300\ud574 \ucd94\uc801\ud558\ub294 \uac83\uc744 \ub354 \uc27d\uace0 \uc548\uc815\uc801\uc73c\ub85c \ud560 \uc218 \uc788\uac8c \ub429\ub2c8\ub2e4."}),(0,a.jsxs)(t.admonition,{type:"info",children:[(0,a.jsxs)(t.mdxAdmonitionTitle,{children:["remember If you want to see the finished code from this tutorial, you can go to the ",(0,a.jsx)(t.code,{children:"nft-contract-royalty"})," folder. :::"]}),(0,a.jsxs)(t.admonition,{title:"\ubb38\uc11c \ubc84\uc804 \uad00\ub9ac",type:"note",children:[(0,a.jsx)(t.p,{children:"\uae00\uc744 \uc791\uc131\ud558\ub294 \uc2dc\uc810\uc5d0\uc11c, \ud574\ub2f9 \uc608\uc81c\ub294 \ub2e4\uc74c \ubc84\uc804\uc5d0\uc11c \uc791\ub3d9\ud569\ub2c8\ub2e4."}),(0,a.jsxs)(t.ul,{children:["\n",(0,a.jsxs)(t.li,{children:["rustc: ",(0,a.jsx)(t.code,{children:"1.77.1"})]}),"\n",(0,a.jsxs)(t.li,{children:["near-cli-rs: ",(0,a.jsx)(t.code,{children:"0.11.0"})]}),"\n",(0,a.jsxs)(t.li,{children:["cargo-near ",(0,a.jsx)(t.code,{children:"0.6.1"})]}),"\n",(0,a.jsxs)(t.li,{children:["NFT standard: ",(0,a.jsx)(t.a,{href:"https://nomicon.io/Standards/Tokens/NonFungibleToken/Core",children:"NEP171"}),", version ",(0,a.jsx)(t.code,{children:"1.0.0"})]}),"\n",(0,a.jsxs)(t.li,{children:["\uc5f4\uac70 \ud45c\uc900: ",(0,a.jsx)(t.a,{href:"https://nomicon.io/Standards/Tokens/NonFungibleToken/Enumeration",children:"NEP181"}),", ",(0,a.jsx)(t.code,{children:"1.0.0"})," \ubc84\uc804"]}),"\n",(0,a.jsxs)(t.li,{children:["\ub85c\uc5f4\ud2f0 \ud45c\uc900: ",(0,a.jsx)(t.a,{href:"https://nomicon.io/Standards/Tokens/NonFungibleToken/Payout",children:"NEP199"}),", ",(0,a.jsx)(t.code,{children:"2.0.0"})," \ubc84\uc804"]}),"\n"]})]})]})]})]})}function h(e={}){const{wrapper:t}={...(0,r.a)(),...e.components};return t?(0,a.jsx)(t,{...e,children:(0,a.jsx)(u,{...e})}):u(e)}},85162:(e,t,n)=>{n.d(t,{Z:()=>l});n(67294);var a=n(36905);const r={tabItem:"tabItem_Ymn6"};var o=n(85893);function l(e){var t=e.children,n=e.hidden,l=e.className;return(0,o.jsx)("div",{role:"tabpanel",className:(0,a.Z)(r.tabItem,l),hidden:n,children:t})}},74866:(e,t,n)=>{n.d(t,{Z:()=>w});var a=n(67294),r=n(36905),o=n(12466),l=n(16550),s=n(20469),i=n(91980),c=n(67392),d=n(20812);function u(e){var t,n;return null!=(t=null==(n=a.Children.toArray(e).filter((function(e){return"\n"!==e})).map((function(e){if(!e||(0,a.isValidElement)(e)&&((t=e.props)&&"object"==typeof t&&"value"in t))return e;var t;throw new Error("Docusaurus error: Bad <Tabs> child <"+("string"==typeof e.type?e.type:e.type.name)+'>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.')})))?void 0:n.filter(Boolean))?t:[]}function h(e){var t=e.values,n=e.children;return(0,a.useMemo)((function(){var e=null!=t?t:function(e){return u(e).map((function(e){var t=e.props;return{value:t.value,label:t.label,attributes:t.attributes,default:t.default}}))}(n);return function(e){var t=(0,c.l)(e,(function(e,t){return e.value===t.value}));if(t.length>0)throw new Error('Docusaurus error: Duplicate values "'+t.map((function(e){return e.value})).join(", ")+'" found in <Tabs>. Every value needs to be unique.')}(e),e}),[t,n])}function p(e){var t=e.value;return e.tabValues.some((function(e){return e.value===t}))}function f(e){var t=e.queryString,n=void 0!==t&&t,r=e.groupId,o=(0,l.k6)(),s=function(e){var t=e.queryString,n=void 0!==t&&t,a=e.groupId;if("string"==typeof n)return n;if(!1===n)return null;if(!0===n&&!a)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return null!=a?a:null}({queryString:n,groupId:r});return[(0,i._X)(s),(0,a.useCallback)((function(e){if(s){var t=new URLSearchParams(o.location.search);t.set(s,e),o.replace(Object.assign({},o.location,{search:t.toString()}))}}),[s,o])]}function y(e){var t,n,r,o,l=e.defaultValue,i=e.queryString,c=void 0!==i&&i,u=e.groupId,y=h(e),m=(0,a.useState)((function(){return function(e){var t,n=e.defaultValue,a=e.tabValues;if(0===a.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(n){if(!p({value:n,tabValues:a}))throw new Error('Docusaurus error: The <Tabs> has a defaultValue "'+n+'" but none of its children has the corresponding value. Available values are: '+a.map((function(e){return e.value})).join(", ")+". If you intend to show no default tab, use defaultValue={null} instead.");return n}var r=null!=(t=a.find((function(e){return e.default})))?t:a[0];if(!r)throw new Error("Unexpected error: 0 tabValues");return r.value}({defaultValue:l,tabValues:y})})),x=m[0],j=m[1],g=f({queryString:c,groupId:u}),b=g[0],v=g[1],w=(t=function(e){return e?"docusaurus.tab."+e:null}({groupId:u}.groupId),n=(0,d.Nk)(t),r=n[0],o=n[1],[r,(0,a.useCallback)((function(e){t&&o.set(e)}),[t,o])]),T=w[0],k=w[1],N=function(){var e=null!=b?b:T;return p({value:e,tabValues:y})?e:null}();return(0,s.Z)((function(){N&&j(N)}),[N]),{selectedValue:x,selectValue:(0,a.useCallback)((function(e){if(!p({value:e,tabValues:y}))throw new Error("Can't select invalid tab value="+e);j(e),v(e),k(e)}),[v,k,y]),tabValues:y}}var m=n(72389);const x={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};var j=n(85893);function g(e){var t=e.className,n=e.block,a=e.selectedValue,l=e.selectValue,s=e.tabValues,i=[],c=(0,o.o5)().blockElementScrollPositionUntilNextRender,d=function(e){var t=e.currentTarget,n=i.indexOf(t),r=s[n].value;r!==a&&(c(t),l(r))},u=function(e){var t,n=null;switch(e.key){case"Enter":d(e);break;case"ArrowRight":var a,r=i.indexOf(e.currentTarget)+1;n=null!=(a=i[r])?a:i[0];break;case"ArrowLeft":var o,l=i.indexOf(e.currentTarget)-1;n=null!=(o=i[l])?o:i[i.length-1]}null==(t=n)||t.focus()};return(0,j.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,r.Z)("tabs",{"tabs--block":n},t),children:s.map((function(e){var t=e.value,n=e.label,o=e.attributes;return(0,j.jsx)("li",Object.assign({role:"tab",tabIndex:a===t?0:-1,"aria-selected":a===t,ref:function(e){return i.push(e)},onKeyDown:u,onClick:d},o,{className:(0,r.Z)("tabs__item",x.tabItem,null==o?void 0:o.className,{"tabs__item--active":a===t}),children:null!=n?n:t}),t)}))})}function b(e){var t=e.lazy,n=e.children,r=e.selectedValue,o=(Array.isArray(n)?n:[n]).filter(Boolean);if(t){var l=o.find((function(e){return e.props.value===r}));return l?(0,a.cloneElement)(l,{className:"margin-top--md"}):null}return(0,j.jsx)("div",{className:"margin-top--md",children:o.map((function(e,t){return(0,a.cloneElement)(e,{key:t,hidden:e.props.value!==r})}))})}function v(e){var t=y(e);return(0,j.jsxs)("div",{className:(0,r.Z)("tabs-container",x.tabList),children:[(0,j.jsx)(g,Object.assign({},t,e)),(0,j.jsx)(b,Object.assign({},t,e))]})}function w(e){var t=(0,m.Z)();return(0,j.jsx)(v,Object.assign({},e,{children:u(e.children)}),String(t))}},71183:(e,t,n)=>{n.d(t,{O2:()=>f,Ey:()=>m,SQ:()=>y});var a=n(67294),r=n(74866),o=n(85162),l=n(74165),s=n(15861),i=n(1841),c=n.n(i),d=n(85893);function u(){return(u=(0,s.Z)((0,l.Z)().mark((function e(t,n,a){var r,o,s,i;return(0,l.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!((o=localStorage.getItem(t+"-until"))&&o>Date.now())){e.next=5;break}r=localStorage.getItem(t),e.next=18;break;case 5:return e.prev=5,e.next=8,fetch(t);case 8:return e.next=10,e.sent.text();case 10:r=e.sent,localStorage.setItem(t,r),localStorage.setItem(t+"-until",Date.now()+6e4),e.next=18;break;case 15:return e.prev=15,e.t0=e.catch(5),e.abrupt("return","Error fetching code, please try reloading");case 18:return s=r.split("\n"),n=n?Number(n)-1:0,a=a?Number(a):s.length,s=s.slice(n,a),i=s.reduce((function(e,t){if(0===t.length)return e;var n=t.match(/^\s+/);return n?Math.min(e,n[0].length):0}),1/0),e.abrupt("return",s.map((function(e){return e.slice(i)})).join("\n"));case 24:case"end":return e.stop()}}),e,null,[[5,15]])})))).apply(this,arguments)}const h=function(e){var t=e.url,n=e.start,r=e.end,o=e.language,l=e.fname,s=e.metastring,i=(0,a.useState)("Loading..."),h=i[0],p=i[1];return(0,a.useEffect)((function(){var e=function(e){var t=e.slice(e.indexOf("https")).split("#"),n=t[0],a=(t[1],new URL(n).pathname.split("/").slice(1)),r=a[0],o=a[1];return a[2],"https://raw.githubusercontent.com/"+r+"/"+o+"/"+a[3]+"/"+a.slice(4).join("/")}(t),a=function(e,t,n){return u.apply(this,arguments)}(e,n,r);a.then((function(e){return p(e)}))})),(0,d.jsxs)("div",{fname:l,children:[(0,d.jsx)(c(),{language:o,metastring:s+" showLineNumbers",children:h}),(0,d.jsx)("div",{style:{fontSize:"0.9em",fontWeight:600,color:"rgb(14, 117, 221)",textAlign:"center",paddingBottom:"13px",textDecoration:"underline"},children:(0,d.jsx)("a",{href:t,target:"_blank",rel:"noreferrer noopener",children:"See full example on GitHub"})})]})};var p={rust:"\ud83e\udd80 Rust",js:"\ud83c\udf10 Javascript",ts:"\ud83c\udf10 Typescript"};function f(e){var t=e.children;return Array.isArray(t)||(t=[t]),(0,d.jsx)(r.Z,{className:"language-tabs",groupId:"code-tabs",children:t.map((function(e,t){return(0,d.jsx)(o.Z,{value:e.props.value,label:p[e.props.value],children:e})}))})}function y(e){var t=e.children,n=e.language,a=e.showSingleFName;return Array.isArray(t)||(t=[t]),t=t.map((function(e){return function(e,t){var n=e.props,a=(n.children,n.url),r=n.start,o=n.end,l=n.fname;if(e.type===m)return m({url:a,start:r,end:o,language:t,fname:l});return e}(e,n)})),1!=t.length||a?(0,d.jsx)(r.Z,{className:"file-tabs",children:t.map((function(e,t){return(0,d.jsx)(o.Z,{value:t,label:e.props.fname,children:e})}))}):(0,d.jsx)(o.Z,{value:0,label:t[0].props.fname,children:t[0]})}function m(e){var t=e.url,n=e.start,a=e.end,r=e.language,o=e.fname,l=e.metastring;return h({url:t,start:n,end:a,language:r,fname:o,metastring:l})}}}]);