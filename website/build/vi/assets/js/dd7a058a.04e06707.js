"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[6058],{81102:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>o,contentTitle:()=>l,default:()=>u,frontMatter:()=>c,metadata:()=>a,toc:()=>d});var r=t(85893),s=t(11151),i=t(71183);const c={id:"skeleton",title:'B\u1ed9 khung v\xe0 Ki\u1ebfn tr\xfac ng\xf4n ng\u1eef Rust"',sidebar_label:"Ki\u1ebfn tr\xfac c\u1ee7a Contract"},l=void 0,a={id:"tutorials/nfts/skeleton",title:'B\u1ed9 khung v\xe0 Ki\u1ebfn tr\xfac ng\xf4n ng\u1eef Rust"',description:"In this article, you'll learn about the basic architecture behind the NFT contract that you'll develop while following this \"Zero to Hero\" series.",source:"@site/i18n/vi/docusaurus-plugin-content-docs/current/3.tutorials/nfts/1-skeleton.md",sourceDirName:"3.tutorials/nfts",slug:"/tutorials/nfts/skeleton",permalink:"/vi/tutorials/nfts/skeleton",draft:!1,unlisted:!1,editUrl:"https://github.com/near/docs/edit/master/website/../docs/3.tutorials/nfts/1-skeleton.md",tags:[],version:"current",lastUpdatedBy:"Github Actions",lastUpdatedAt:1719825734e3,sidebarPosition:1,frontMatter:{id:"skeleton",title:'B\u1ed9 khung v\xe0 Ki\u1ebfn tr\xfac ng\xf4n ng\u1eef Rust"',sidebar_label:"Ki\u1ebfn tr\xfac c\u1ee7a Contract"},sidebar:"tutorials",previous:{title:"Contract \u0111\xe3 \u0111\u01b0\u1ee3c deploy s\u1eb5n",permalink:"/vi/tutorials/nfts/predeployed-contract"},next:{title:"Minting",permalink:"/vi/tutorials/nfts/minting"}},o={},d=[{value:"Gi\u1edbi thi\u1ec7u",id:"gi\u1edbi-thi\u1ec7u",level:2},{value:"C\u1ea5u tr\xfac file",id:"c\u1ea5u-tr\xfac-file",level:2},{value:"C\xe1c file source",id:"c\xe1c-file-source",level:3},{value:"<code>approval.rs</code>",id:"approvalrs",level:2},{value:"<code>enumeration.rs</code>",id:"enumerationrs",level:2},{value:"<code>lib.rs</code>",id:"librs",level:2},{value:"<code>metadata.rs</code>",id:"metadatars",level:2},{value:"<code>mint.rs</code>",id:"mintrs",level:2},{value:"<code>nft_core.rs</code>",id:"nft_corers",level:2},{value:"<code>royalty.rs</code>",id:"royaltyrs",level:2},{value:"<code>events.rs</code>",id:"eventsrs",level:2},{value:"Build b\u1ed9 khung n\xe0y",id:"build-b\u1ed9-khung-n\xe0y",level:2},{value:"K\u1ebft lu\u1eadn",id:"k\u1ebft-lu\u1eadn",level:2}];function h(e){const n={a:"a",admonition:"admonition",blockquote:"blockquote",code:"code",em:"em",h2:"h2",h3:"h3",hr:"hr",li:"li",mdxAdmonitionTitle:"mdxAdmonitionTitle",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,s.a)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(n.p,{children:["In this article, you'll learn about the basic architecture behind the NFT contract that you'll develop while following this ",(0,r.jsx)(n.em,{children:'"Zero to Hero"'})," series."]}),"\n",(0,r.jsx)(n.p,{children:"You'll discover the contract's layout and you'll see how the Rust files are structured in order to build a feature-complete smart contract."}),"\n",(0,r.jsxs)(n.admonition,{type:"info",children:[(0,r.jsxs)(n.mdxAdmonitionTitle,{children:["Skeleton Contract You can find the skeleton contract in our ",(0,r.jsx)(n.a,{href:"https://github.com/near-examples/nft-tutorial/tree/main/nft-contract-skeleton",children:"GitHub repository"})," :::"]}),(0,r.jsxs)(n.admonition,{type:"info",children:[(0,r.jsxs)(n.mdxAdmonitionTitle,{children:["B\u1ea1n m\u1edbi \u0111\u1ebfn v\u1edbi Rust? If you are new to Rust and want to dive into smart contract development, our ",(0,r.jsx)(n.a,{href:"/vi/build/smart-contracts/quickstart",children:"Quick-start guide"})," is a great place to start. :::"]}),(0,r.jsx)(n.hr,{}),(0,r.jsx)(n.h2,{id:"gi\u1edbi-thi\u1ec7u",children:"Gi\u1edbi thi\u1ec7u"}),(0,r.jsx)(n.p,{children:"H\u01b0\u1edbng d\u1eabn n\xe0y tr\xecnh b\xe0y b\u1ed9 khung m\xe3 ngu\u1ed3n cho NFT smart contract v\xe0 c\u1ea5u tr\xfac file c\u1ee7a n\xf3."}),(0,r.jsx)(n.p,{children:"Once every file and functions have been covered, we will guide you through the process of building the mock-up contract to confirm that your Rust setup works."}),(0,r.jsx)(n.hr,{}),(0,r.jsx)(n.h2,{id:"c\u1ea5u-tr\xfac-file",children:"C\u1ea5u tr\xfac file"}),(0,r.jsxs)(n.p,{children:["Following a regular ",(0,r.jsx)(n.a,{href:"https://www.rust-lang.org/",children:"Rust"})," project, the file structure for this smart contract has:"]}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"nft-contract\n\u251c\u2500\u2500 Cargo.lock\n\u251c\u2500\u2500 Cargo.toml\n\u251c\u2500\u2500 README.md\n\u2514\u2500\u2500 src\n    \u251c\u2500\u2500 approval.rs\n    \u251c\u2500\u2500 enumeration.rs\n    \u251c\u2500\u2500 lib.rs\n    \u251c\u2500\u2500 metadata.rs\n    \u251c\u2500\u2500 mint.rs\n    \u251c\u2500\u2500 nft_core.rs\n    \u251c\u2500\u2500 events.rs\n    \u2514\u2500\u2500 royalty.rs\n"})}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["The file ",(0,r.jsx)(n.code,{children:"Cargo.toml"})," defines the code dependencies"]}),"\n",(0,r.jsxs)(n.li,{children:["The ",(0,r.jsx)(n.code,{children:"src"})," folder contains all the Rust source files"]}),"\n"]}),(0,r.jsx)("hr",{class:"subsection"}),(0,r.jsx)(n.h3,{id:"c\xe1c-file-source",children:"C\xe1c file source"}),(0,r.jsx)(n.p,{children:"Here is a brief description of what each source file is responsible for:"}),(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"File"}),(0,r.jsx)(n.th,{children:"M\xf4 t\u1ea3"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.a,{href:"#approvalrs",children:"approval.rs"})}),(0,r.jsx)(n.td,{children:"Has the functions that controls the access and transfers of non-fungible tokens"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.a,{href:"#enumerationrs",children:"enumeration.rs"})}),(0,r.jsx)(n.td,{children:"Contains the methods to list NFT tokens and their owners"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.a,{href:"#librs",children:"lib.rs"})}),(0,r.jsx)(n.td,{children:"Holds the smart contract initialization functions"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.a,{href:"#metadatars",children:"metadata.rs"})}),(0,r.jsx)(n.td,{children:"Defines the token and metadata structure"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.a,{href:"#mintrs",children:"mint.rs"})}),(0,r.jsx)(n.td,{children:"Contains token minting logic"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.a,{href:"#nft_corers",children:"nft_core.rs"})}),(0,r.jsx)(n.td,{children:"Logic ch\xednh cho ph\xe9p b\u1ea1n transfer c\xe1c NFT gi\u1eefa nh\u1eefng user."})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.a,{href:"#royaltyrs",children:"royalty.rs"})}),(0,r.jsx)(n.td,{children:"Contains payout-related functions"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.a,{href:"#events",children:"events.rs"})}),(0,r.jsx)(n.td,{children:"Contains events related structures"})]})]})]}),(0,r.jsxs)(n.admonition,{type:"tip",children:[(0,r.jsxs)(n.mdxAdmonitionTitle,{children:["Explore the code in our ",(0,r.jsx)(n.a,{href:"https://github.com/near-examples/nft-tutorial/",children:"GitHub repository"}),". :::"]}),(0,r.jsx)(n.hr,{}),(0,r.jsx)(n.h2,{id:"approvalrs",children:(0,r.jsx)(n.code,{children:"approval.rs"})}),(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"\u0110o\u1ea1n n\xe0y cho ph\xe9p m\u1ecdi ng\u01b0\u1eddi approve cho c\xe1c t\xe0i kho\u1ea3n kh\xe1c thay m\u1eb7t h\u1ecd transfer c\xe1c NFT."}),"\n"]}),(0,r.jsxs)(n.p,{children:["This file contains the logic that complies with the standard's ",(0,r.jsx)(n.a,{href:"https://nomicon.io/Standards/Tokens/NonFungibleToken/ApprovalManagement",children:"approvals management"})," extension. D\u01b0\u1edbi \u0111\xe2y l\xe0 b\u1ea3ng li\u1ec7t k\xea c\xe1c method v\xe0 function c\u1ee7a ch\xfang:"]}),(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Method"}),(0,r.jsx)(n.th,{children:"M\xf4 t\u1ea3"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"nft_approve"})}),(0,r.jsx)(n.td,{children:"Approve m\u1ed9t account ID quy\u1ec1n transfer token d\u01b0\u1edbi danh ngh\u0129a c\u1ee7a b\u1ea1n."})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"nft_is_approved"})}),(0,r.jsx)(n.td,{children:"Ki\u1ec3m tra xem account nh\u1eadp v\xe0o c\xf3 quy\u1ec1n truy c\u1eadp \u0111\u1ec3 approve token ID hay kh\xf4ng."})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"nft_revoke"})}),(0,r.jsx)(n.td,{children:"Thu h\u1ed3i quy\u1ec1n c\u1ee7a m\u1ed9t account c\u1ee5 th\u1ec3 trong vi\u1ec7c transfer token thay b\u1ea1n."})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"nft_revoke_all"})}),(0,r.jsx)(n.td,{children:"Thu h\u1ed3i quy\u1ec1n c\u1ee7a t\u1ea5t c\u1ea3 c\xe1c account trong vi\u1ec7c transfer token thay b\u1ea1n."})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"nft_on_approve"})}),(0,r.jsxs)(n.td,{children:["Function callback n\xe0y, \u0111\u01b0\u1ee3c kh\u1edfi t\u1ea1o trong ",(0,r.jsx)(n.code,{children:"nft_approve"}),", l\xe0 cross contract call t\u1edbi m\u1ed9t contract b\xean ngo\xe0i."]})]})]})]}),(0,r.jsx)(i.Ey,{language:"rust",start:"4",end:"33",url:"https://github.com/near-examples/nft-tutorial/blob/main/nft-contract-basic/src/approval.rs"}),(0,r.jsxs)(n.p,{children:["You'll learn more about these functions in the ",(0,r.jsx)(n.a,{href:"/tutorials/nfts/approvals",children:"approvals section"})," of the Zero to Hero series."]}),(0,r.jsx)(n.hr,{}),(0,r.jsx)(n.h2,{id:"enumerationrs",children:(0,r.jsx)(n.code,{children:"enumeration.rs"})}),(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsxs)(n.p,{children:["This file provides the functions needed to view information about NFTs, and follows the standard's ",(0,r.jsx)(n.a,{href:"https://nomicon.io/Standards/Tokens/NonFungibleToken/Enumeration",children:"enumeration"})," extension."]}),"\n"]}),(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Method"}),(0,r.jsx)(n.th,{children:"M\xf4 t\u1ea3"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"nft_total_supply"})}),(0,r.jsx)(n.td,{children:"Returns the total amount of NFTs stored on the contract"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"nft_tokens"})}),(0,r.jsx)(n.td,{children:"Tr\u1ea3 v\u1ec1 danh s\xe1ch ph\xe2n trang c\u1ee7a c\xe1c NFT l\u01b0u tr\u1eef tr\xean contract b\u1ea5t k\u1ec3 ch\u1ee7 s\u1edf h\u1eefu c\u1ee7a ch\xfang l\xe0 ai."})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"nft_supply_for_owner"})}),(0,r.jsx)(n.td,{children:"Allows you view the total number of NFTs owned by any given user"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"nft_tokens_for_owner"})}),(0,r.jsx)(n.td,{children:"Returns a paginated list of NFTs owned by any given user"})]})]})]}),(0,r.jsx)(i.Ey,{language:"rust",start:"4",end:"44",url:"https://github.com/near-examples/nft-tutorial/blob/main/nft-contract-skeleton/src/enumeration.rs"}),(0,r.jsxs)(n.p,{children:["You'll learn more about these functions in the ",(0,r.jsx)(n.a,{href:"/docs/tutorials/contracts/nfts/enumeration",children:"enumeration section"})," of the tutorial series."]}),(0,r.jsx)(n.hr,{}),(0,r.jsx)(n.h2,{id:"librs",children:(0,r.jsx)(n.code,{children:"lib.rs"})}),(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"File n\xe0y ph\xe1c th\u1ea3o nh\u1eefng th\xf4ng tin m\xe0 contract l\u01b0u tr\u1eef v\xe0 theo d\xf5i."}),"\n"]}),(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Method"}),(0,r.jsx)(n.th,{children:"M\xf4 t\u1ea3"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"new_default_meta"})}),(0,r.jsxs)(n.td,{children:["Init contract v\u1edbi default ",(0,r.jsx)(n.code,{children:"metadata"})," do \u0111\xf3 user kh\xf4ng c\u1ea7n ph\u1ea3i cung c\u1ea5p b\u1ea5t k\xec input n\xe0o."]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"new"})}),(0,r.jsxs)(n.td,{children:["Init contract v\u1edbi ",(0,r.jsx)(n.code,{children:"metadata"})," m\xe0 user cung c\u1ea5p."]})]})]})]}),(0,r.jsxs)(n.admonition,{type:"info",children:[(0,r.jsxs)(n.mdxAdmonitionTitle,{children:["H\xe3y ghi nh\u1edb C\xe1c init function (",(0,r.jsx)(n.code,{children:"new"}),", ",(0,r.jsx)(n.code,{children:"new_default_meta"}),") ch\u1ec9 c\xf3 th\u1ec3 \u0111\u01b0\u1ee3c call m\u1ed9t l\u1ea7n duy nh\u1ea5t. :::"]}),(0,r.jsx)(i.Ey,{language:"rust",start:"47",end:"73",url:"https://github.com/near-examples/nft-tutorial/blob/main/nft-contract-skeleton/src/lib.rs"}),(0,r.jsxs)(n.p,{children:["You'll learn more about these functions in the ",(0,r.jsx)(n.a,{href:"/docs/tutorials/contracts/nfts/minting",children:"minting section"})," of the tutorial series."]}),(0,r.jsx)(n.hr,{}),(0,r.jsx)(n.h2,{id:"metadatars",children:(0,r.jsx)(n.code,{children:"metadata.rs"})}),(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsxs)(n.p,{children:["File n\xe0y \u0111\u01b0\u1ee3c s\u1eed d\u1ee5ng \u0111\u1ec3 theo d\xf5i th\xf4ng tin \u0111\u01b0\u1ee3c l\u01b0u tr\u1eef cho c\xe1c token v\xe0 metadata. In addition, you can define a function to view the contract's metadata which is part of the standard's ",(0,r.jsx)(n.a,{href:"https://nomicon.io/Standards/Tokens/NonFungibleToken/Metadata",children:"metadata"})," extension."]}),"\n"]}),(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"T\xean"}),(0,r.jsx)(n.th,{children:"M\xf4 t\u1ea3"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"TokenMetadata"})}),(0,r.jsx)(n.td,{children:"This structure defines the metadata that can be stored for each token (title, description, media, etc.)."})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"Token"})}),(0,r.jsx)(n.td,{children:"Structure n\xe0y li\u1ec7t k\xea nh\u1eefng th\xf4ng tin s\u1ebd \u0111\u01b0\u1ee3c l\u01b0u tr\u1eef trong contract cho m\u1ed7i token."})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"JsonToken"})}),(0,r.jsx)(n.td,{children:"Khi truy v\u1ea5n th\xf4ng tin v\u1ec1 NFT th\xf4ng qua c\xe1c view call, th\xf4ng tin tr\u1ea3 v\u1ec1 \u0111\u01b0\u1ee3c l\u01b0u tr\u1eef trong JSON token n\xe0y."})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"nft_metadata"})}),(0,r.jsx)(n.td,{children:"Function n\xe0y cho ph\xe9p user query metadata b\xean trong contact."})]})]})]}),(0,r.jsx)(i.Ey,{language:"rust",start:"12",end:"60",url:"https://github.com/near-examples/nft-tutorial/blob/main/nft-contract-skeleton/src/metadata.rs"}),(0,r.jsxs)(n.p,{children:["B\u1ea1n c\xf3 th\u1ec3 t\xecm hi\u1ec3u th\xeam v\u1ec1 c\xe1c function n\xe0y trong ",(0,r.jsx)(n.a,{href:"/docs/tutorials/contracts/nfts/minting",children:"minting section"})," c\u1ee7a serie h\u01b0\u1edbng d\u1eabn."]}),(0,r.jsx)(n.hr,{}),(0,r.jsx)(n.h2,{id:"mintrs",children:(0,r.jsx)(n.code,{children:"mint.rs"})}),(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"Contains the logic to mint the non-fungible tokens"}),"\n"]}),(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Method"}),(0,r.jsx)(n.th,{children:"M\xf4 t\u1ea3"})]})}),(0,r.jsx)(n.tbody,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"nft_mint"})}),(0,r.jsx)(n.td,{children:"Function n\xe0y s\u1ebd mint m\u1ed9t non-fungible token."})]})})]}),(0,r.jsx)(i.Ey,{language:"rust",start:"4",end:"16",url:"https://github.com/near-examples/nft-tutorial/blob/main/nft-contract-skeleton/src/mint.rs"}),(0,r.jsx)(n.hr,{}),(0,r.jsx)(n.h2,{id:"nft_corers",children:(0,r.jsx)(n.code,{children:"nft_core.rs"})}),(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"Core logic that allows to transfer NFTs between users."}),"\n"]}),(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Method"}),(0,r.jsx)(n.th,{children:"M\xf4 t\u1ea3"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"nft_transfer"})}),(0,r.jsx)(n.td,{children:"Transfer m\u1ed9t NFT \u0111\u1ebfn m\u1ed9t receiver ID."})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"nft_transfer_call"})}),(0,r.jsxs)(n.td,{children:["Transfer m\u1ed9t NFT \u0111\u1ebfn m\u1ed9t receiver v\xe0 call m\u1ed9t function trong contract c\u1ee7a receiver ID. Function tr\u1ea3 v\u1ec1 ",(0,r.jsx)(n.code,{children:"true"})," n\u1ebfu token \u0111\xe3 \u0111\u01b0\u1ee3c transfer t\u1eeb account c\u1ee7a sender."]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"nft_token"})}),(0,r.jsx)(n.td,{children:"Cho ph\xe9p c\xe1c user query th\xf4ng tin c\u1ee7a m\u1ed9t NFT c\u1ee5 th\u1ec3."})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"nft_on_transfer"})}),(0,r.jsxs)(n.td,{children:["\u0110\u01b0\u1ee3c call b\u1edfi c\xe1c contract kh\xe1c khi m\u1ed9t NFT \u0111\u01b0\u1ee3c transfer \u0111\u1ebfn contract account c\u1ee7a b\u1ea1n th\xf4ng qua method ",(0,r.jsx)(n.code,{children:"nft_transfer_call"}),". Method s\u1ebd tr\u1ea3 v\u1ec1 ",(0,r.jsx)(n.code,{children:"true"})," n\u1ebfu token c\xf3 th\u1ec3 \u0111\u01b0\u1ee3c tr\u1ea3 v\u1ec1 cho sender."]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"nft_resolve_transfer"})}),(0,r.jsxs)(n.td,{children:["Khi b\u1ea1n b\u1eaft \u0111\u1ea7u c\xe2u l\u1ec7nh ",(0,r.jsx)(n.code,{children:"nft_transfer_call"})," v\xe0 transfer m\u1ed9t NFT, theo chu\u1ea9n m\u1ed9t method c\u0169ng \u0111\u01b0\u1ee3c call tr\xean contract c\u1ee7a receiver. N\u1ebfu receiver c\u1ea7n b\u1ea1n tr\u1ea3 v\u1ec1 NFT cho sender (theo gi\xe1 tr\u1ecb tr\u1ea3 v\u1ec1 c\u1ee7a ph\u01b0\u01a1ng th\u1ee9c ",(0,r.jsx)(n.code,{children:"nft_on_transfer"}),"), h\xe0m n\xe0y cho ph\xe9p b\u1ea1n th\u1ef1c thi logic \u0111\xf3."]})]})]})]}),(0,r.jsx)(i.Ey,{language:"rust",start:"7",end:"56",url:"https://github.com/near-examples/nft-tutorial/blob/main/nft-contract-skeleton/src/nft_core.rs"}),(0,r.jsxs)(n.p,{children:["You'll learn more about these functions in the ",(0,r.jsx)(n.a,{href:"/tutorials/nfts/core",children:"core section"})," of the tutorial series."]}),(0,r.jsx)(n.hr,{}),(0,r.jsx)(n.h2,{id:"royaltyrs",children:(0,r.jsx)(n.code,{children:"royalty.rs"})}),(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"Ch\u1ee9a c\xe1c function li\xean quan \u0111\u1ebfn thanh to\xe1n."}),"\n"]}),(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Method"}),(0,r.jsx)(n.th,{children:"M\xf4 t\u1ea3"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"nft_payout"})}),(0,r.jsx)(n.td,{children:"View method n\xe0y t\xednh to\xe1n kho\u1ea3n thanh to\xe1n cho m\u1ed9t token nh\u1ea5t \u0111\u1ecbnh."})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"nft_transfer_payout"})}),(0,r.jsx)(n.td,{children:"Transfer token \u0111\u1ebfn receiver ID v\xe0 tr\u1ea3 v\u1ec1 payout object c\u1ea7n \u0111\u01b0\u1ee3c thanh to\xe1n v\u1edbi m\u1ed9t balance cho tr\u01b0\u1edbc."})]})]})]}),(0,r.jsx)(i.Ey,{language:"rust",start:"3",end:"17",url:"https://github.com/near-examples/nft-tutorial/blob/main/nft-contract-skeleton/src/royalty.rs"}),(0,r.jsxs)(n.p,{children:["You'll learn more about these functions in the ",(0,r.jsx)(n.a,{href:"/docs/tutorials/contracts/nfts/royalty",children:"royalty section"})," of the tutorial series."]}),(0,r.jsx)(n.hr,{}),(0,r.jsx)(n.h2,{id:"eventsrs",children:(0,r.jsx)(n.code,{children:"events.rs"})}),(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"Contains events-related structures."}),"\n"]}),(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Method"}),(0,r.jsx)(n.th,{children:"Description"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"EventLogVariant"})}),(0,r.jsx)(n.td,{children:"This enum represents the data type of the EventLog."})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"EventLog"})}),(0,r.jsx)(n.td,{children:"Interface to capture data about an event."})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"NftMintLog"})}),(0,r.jsx)(n.td,{children:"An event log to capture token minting."})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"NftTransferLog"})}),(0,r.jsx)(n.td,{children:"An event log to capture token transfer."})]})]})]}),(0,r.jsx)(i.Ey,{language:"rust",start:"5",end:"79",url:"https://github.com/near-examples/nft-tutorial/blob/main/nft-contract-events/src/events.rs"}),(0,r.jsxs)(n.p,{children:["You'll learn more about these functions in the ",(0,r.jsx)(n.a,{href:"/tutorials/nfts/events",children:"events section"})," of the tutorial series."]}),(0,r.jsx)(n.hr,{}),(0,r.jsx)(n.h2,{id:"build-b\u1ed9-khung-n\xe0y",children:"Build b\u1ed9 khung n\xe0y"}),(0,r.jsx)(n.p,{children:"N\u1ebfu b\u1ea1n ch\u01b0a clone repository ch\xednh, h\xe3y m\u1edf m\u1ed9t terminal v\xe0 ch\u1ea1y c\xe2u l\u1ec7nh:"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sh",children:"git clone https://github.com/near-examples/nft-tutorial/\n"})}),(0,r.jsxs)(n.p,{children:["Next, go to the ",(0,r.jsx)(n.code,{children:"nft-contract-skeleton/"})," folder and build the contract with ",(0,r.jsx)(n.code,{children:"cargo-near"}),":"]}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sh",children:"cd nft-tutorial\ncd nft-contract-skeleton/\ncargo near build\n"})}),(0,r.jsx)(n.p,{children:"V\xec source n\xe0y ch\u1ec9 l\xe0 m\u1ed9t b\u1ed9 khung n\xean b\u1ea1n s\u1ebd nh\u1eadn \u0111\u01b0\u1ee3c nhi\u1ec1u warning v\u1ec1 code kh\xf4ng s\u1eed d\u1ee5ng, ch\u1eb3ng h\u1ea1n nh\u01b0:"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"   Compiling nft_contract_skeleton v0.1.0 (/Users/near-examples/Documents/my/projects/near/examples/nft-tutorial/nft-contract-basic)\n \u2502 warning: unused imports: `LazyOption`, `LookupMap`, `UnorderedMap`, `UnorderedSet`\n \u2502  --\x3e src/lib.rs:3:29\n \u2502   |\n \u2502 3 | use near_sdk::collections::{LazyOption, LookupMap, UnorderedMap, UnorderedSet};\n \u2502   |                             ^^^^^^^^^^  ^^^^^^^^^  ^^^^^^^^^^^^  ^^^^^^^^^^^^\n \u2502   |\n \u2502   = note: `#[warn(unused_imports)]` on by default\n \u2502\n \u2502 warning: unused import: `Base64VecU8`\n \u2502  --\x3e src/lib.rs:4:28\n \u2502   |\n \u2502 4 | use near_sdk::json_types::{Base64VecU8, U128};\n \u2502   |\n\n \u2502 warning: `nft_contract_skeleton` (lib) generated 48 warnings (run `cargo fix --lib -p nft_contract_skeleton` to apply 45 suggestions)\n \u2502     Finished release [optimized] target(s) in 11.01s\n \u2713 Contract successfully built!\n"})}),(0,r.jsx)(n.p,{children:"\u0110\u1eebng lo l\u1eafng v\u1ec1 nh\u1eefng warning n\xe0y, v\xec b\u1ea1n s\u1ebd kh\xf4ng deploy contract n\xe0y. Vi\u1ec7c build m\u1ed9t b\u1ed9 khung r\u1ea5t h\u1eefu \xedch \u0111\u1ec3 x\xe1c nh\u1eadn r\u1eb1ng Rust toolchain c\u1ee7a b\u1ea1n ho\u1ea1t \u0111\u1ed9ng b\xecnh th\u01b0\u1eddng v\xe0 b\u1ea1n s\u1ebd c\xf3 th\u1ec3 compile c\xe1c phi\xean b\u1ea3n c\u1ea3i ti\u1ebfn c\u1ee7a NFT contract n\xe0y trong c\xe1c h\u01b0\u1edbng d\u1eabn s\u1eafp t\u1edbi."}),(0,r.jsx)(n.hr,{}),(0,r.jsx)(n.h2,{id:"k\u1ebft-lu\u1eadn",children:"K\u1ebft lu\u1eadn"}),(0,r.jsxs)(n.p,{children:["B\u1ea1n \u0111\xe3 xem b\u1ed1 c\u1ee5c c\u1ee7a NFT smart contract n\xe0y v\xe0 c\xe1ch t\u1ea5t c\u1ea3 c\xe1c function \u0111\u01b0\u1ee3c b\u1ed1 tr\xed qua c\xe1c source file kh\xe1c nhau. Using ",(0,r.jsx)(n.code,{children:"yarn"}),", you've been able to compile the contract, and you'll start fleshing out this skeleton in the next ",(0,r.jsx)(n.a,{href:"/vi/tutorials/nfts/minting",children:"Minting tutorial"}),"."]}),(0,r.jsx)(n.admonition,{title:"Versioning for this article At the time of this writing, this example works with the following versions:",type:"note",children:(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["rustc: ",(0,r.jsx)(n.code,{children:"1.76.0"})]}),"\n",(0,r.jsxs)(n.li,{children:["near-sdk-rs: ",(0,r.jsx)(n.code,{children:"5.1.0"})]}),"\n",(0,r.jsxs)(n.li,{children:["cargo-near: ",(0,r.jsx)(n.code,{children:"0.6.1"})]}),"\n",(0,r.jsxs)(n.li,{children:["NFT standard: ",(0,r.jsx)(n.a,{href:"https://nomicon.io/Standards/Tokens/NonFungibleToken/Core",children:"NEP171"}),", version ",(0,r.jsx)(n.code,{children:"1.0.0"})]}),"\n"]})})]})]})]})]})]})}function u(e={}){const{wrapper:n}={...(0,s.a)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(h,{...e})}):h(e)}},85162:(e,n,t)=>{t.d(n,{Z:()=>c});t(67294);var r=t(36905);const s={tabItem:"tabItem_Ymn6"};var i=t(85893);function c(e){var n=e.children,t=e.hidden,c=e.className;return(0,i.jsx)("div",{role:"tabpanel",className:(0,r.Z)(s.tabItem,c),hidden:t,children:n})}},74866:(e,n,t)=>{t.d(n,{Z:()=>k});var r=t(67294),s=t(36905),i=t(12466),c=t(16550),l=t(20469),a=t(91980),o=t(67392),d=t(20812);function h(e){var n,t;return null!=(n=null==(t=r.Children.toArray(e).filter((function(e){return"\n"!==e})).map((function(e){if(!e||(0,r.isValidElement)(e)&&((n=e.props)&&"object"==typeof n&&"value"in n))return e;var n;throw new Error("Docusaurus error: Bad <Tabs> child <"+("string"==typeof e.type?e.type:e.type.name)+'>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.')})))?void 0:t.filter(Boolean))?n:[]}function u(e){var n=e.values,t=e.children;return(0,r.useMemo)((function(){var e=null!=n?n:function(e){return h(e).map((function(e){var n=e.props;return{value:n.value,label:n.label,attributes:n.attributes,default:n.default}}))}(t);return function(e){var n=(0,o.l)(e,(function(e,n){return e.value===n.value}));if(n.length>0)throw new Error('Docusaurus error: Duplicate values "'+n.map((function(e){return e.value})).join(", ")+'" found in <Tabs>. Every value needs to be unique.')}(e),e}),[n,t])}function x(e){var n=e.value;return e.tabValues.some((function(e){return e.value===n}))}function j(e){var n=e.queryString,t=void 0!==n&&n,s=e.groupId,i=(0,c.k6)(),l=function(e){var n=e.queryString,t=void 0!==n&&n,r=e.groupId;if("string"==typeof t)return t;if(!1===t)return null;if(!0===t&&!r)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return null!=r?r:null}({queryString:t,groupId:s});return[(0,a._X)(l),(0,r.useCallback)((function(e){if(l){var n=new URLSearchParams(i.location.search);n.set(l,e),i.replace(Object.assign({},i.location,{search:n.toString()}))}}),[l,i])]}function f(e){var n,t,s,i,c=e.defaultValue,a=e.queryString,o=void 0!==a&&a,h=e.groupId,f=u(e),p=(0,r.useState)((function(){return function(e){var n,t=e.defaultValue,r=e.tabValues;if(0===r.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(t){if(!x({value:t,tabValues:r}))throw new Error('Docusaurus error: The <Tabs> has a defaultValue "'+t+'" but none of its children has the corresponding value. Available values are: '+r.map((function(e){return e.value})).join(", ")+". If you intend to show no default tab, use defaultValue={null} instead.");return t}var s=null!=(n=r.find((function(e){return e.default})))?n:r[0];if(!s)throw new Error("Unexpected error: 0 tabValues");return s.value}({defaultValue:c,tabValues:f})})),m=p[0],g=p[1],b=j({queryString:o,groupId:h}),v=b[0],y=b[1],k=(n=function(e){return e?"docusaurus.tab."+e:null}({groupId:h}.groupId),t=(0,d.Nk)(n),s=t[0],i=t[1],[s,(0,r.useCallback)((function(e){n&&i.set(e)}),[n,i])]),w=k[0],_=k[1],T=function(){var e=null!=v?v:w;return x({value:e,tabValues:f})?e:null}();return(0,l.Z)((function(){T&&g(T)}),[T]),{selectedValue:m,selectValue:(0,r.useCallback)((function(e){if(!x({value:e,tabValues:f}))throw new Error("Can't select invalid tab value="+e);g(e),y(e),_(e)}),[y,_,f]),tabValues:f}}var p=t(72389);const m={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};var g=t(85893);function b(e){var n=e.className,t=e.block,r=e.selectedValue,c=e.selectValue,l=e.tabValues,a=[],o=(0,i.o5)().blockElementScrollPositionUntilNextRender,d=function(e){var n=e.currentTarget,t=a.indexOf(n),s=l[t].value;s!==r&&(o(n),c(s))},h=function(e){var n,t=null;switch(e.key){case"Enter":d(e);break;case"ArrowRight":var r,s=a.indexOf(e.currentTarget)+1;t=null!=(r=a[s])?r:a[0];break;case"ArrowLeft":var i,c=a.indexOf(e.currentTarget)-1;t=null!=(i=a[c])?i:a[a.length-1]}null==(n=t)||n.focus()};return(0,g.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,s.Z)("tabs",{"tabs--block":t},n),children:l.map((function(e){var n=e.value,t=e.label,i=e.attributes;return(0,g.jsx)("li",Object.assign({role:"tab",tabIndex:r===n?0:-1,"aria-selected":r===n,ref:function(e){return a.push(e)},onKeyDown:h,onClick:d},i,{className:(0,s.Z)("tabs__item",m.tabItem,null==i?void 0:i.className,{"tabs__item--active":r===n}),children:null!=t?t:n}),n)}))})}function v(e){var n=e.lazy,t=e.children,s=e.selectedValue,i=(Array.isArray(t)?t:[t]).filter(Boolean);if(n){var c=i.find((function(e){return e.props.value===s}));return c?(0,r.cloneElement)(c,{className:"margin-top--md"}):null}return(0,g.jsx)("div",{className:"margin-top--md",children:i.map((function(e,n){return(0,r.cloneElement)(e,{key:n,hidden:e.props.value!==s})}))})}function y(e){var n=f(e);return(0,g.jsxs)("div",{className:(0,s.Z)("tabs-container",m.tabList),children:[(0,g.jsx)(b,Object.assign({},n,e)),(0,g.jsx)(v,Object.assign({},n,e))]})}function k(e){var n=(0,p.Z)();return(0,g.jsx)(y,Object.assign({},e,{children:h(e.children)}),String(n))}},71183:(e,n,t)=>{t.d(n,{O2:()=>j,Ey:()=>p,SQ:()=>f});var r=t(67294),s=t(74866),i=t(85162),c=t(74165),l=t(15861),a=t(1841),o=t.n(a),d=t(85893);function h(){return(h=(0,l.Z)((0,c.Z)().mark((function e(n,t,r){var s,i,l,a;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!((i=localStorage.getItem(n+"-until"))&&i>Date.now())){e.next=5;break}s=localStorage.getItem(n),e.next=18;break;case 5:return e.prev=5,e.next=8,fetch(n);case 8:return e.next=10,e.sent.text();case 10:s=e.sent,localStorage.setItem(n,s),localStorage.setItem(n+"-until",Date.now()+6e4),e.next=18;break;case 15:return e.prev=15,e.t0=e.catch(5),e.abrupt("return","Error fetching code, please try reloading");case 18:return l=s.split("\n"),t=t?Number(t)-1:0,r=r?Number(r):l.length,l=l.slice(t,r),a=l.reduce((function(e,n){if(0===n.length)return e;var t=n.match(/^\s+/);return t?Math.min(e,t[0].length):0}),1/0),e.abrupt("return",l.map((function(e){return e.slice(a)})).join("\n"));case 24:case"end":return e.stop()}}),e,null,[[5,15]])})))).apply(this,arguments)}const u=function(e){var n=e.url,t=e.start,s=e.end,i=e.language,c=e.fname,l=e.metastring,a=(0,r.useState)("Loading..."),u=a[0],x=a[1];return(0,r.useEffect)((function(){var e=function(e){var n=e.slice(e.indexOf("https")).split("#"),t=n[0],r=(n[1],new URL(t).pathname.split("/").slice(1)),s=r[0],i=r[1];return r[2],"https://raw.githubusercontent.com/"+s+"/"+i+"/"+r[3]+"/"+r.slice(4).join("/")}(n),r=function(e,n,t){return h.apply(this,arguments)}(e,t,s);r.then((function(e){return x(e)}))})),(0,d.jsxs)("div",{fname:c,children:[(0,d.jsx)(o(),{language:i,metastring:l+" showLineNumbers",children:u}),(0,d.jsx)("div",{style:{fontSize:"0.9em",fontWeight:600,color:"rgb(14, 117, 221)",textAlign:"center",paddingBottom:"13px",textDecoration:"underline"},children:(0,d.jsx)("a",{href:n,target:"_blank",rel:"noreferrer noopener",children:"See full example on GitHub"})})]})};var x={rust:"\ud83e\udd80 Rust",js:"\ud83c\udf10 Javascript",ts:"\ud83c\udf10 Typescript"};function j(e){var n=e.children;return Array.isArray(n)||(n=[n]),(0,d.jsx)(s.Z,{className:"language-tabs",groupId:"code-tabs",children:n.map((function(e,n){return(0,d.jsx)(i.Z,{value:e.props.value,label:x[e.props.value],children:e})}))})}function f(e){var n=e.children,t=e.language,r=e.showSingleFName;return Array.isArray(n)||(n=[n]),n=n.map((function(e){return function(e,n){var t=e.props,r=(t.children,t.url),s=t.start,i=t.end,c=t.fname;if(e.type===p)return p({url:r,start:s,end:i,language:n,fname:c});return e}(e,t)})),1!=n.length||r?(0,d.jsx)(s.Z,{className:"file-tabs",children:n.map((function(e,n){return(0,d.jsx)(i.Z,{value:n,label:e.props.fname,children:e})}))}):(0,d.jsx)(i.Z,{value:0,label:n[0].props.fname,children:n[0]})}function p(e){var n=e.url,t=e.start,r=e.end,s=e.language,i=e.fname,c=e.metastring;return u({url:n,start:t,end:r,language:s,fname:i,metastring:c})}}}]);